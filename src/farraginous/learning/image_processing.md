---
date: 2024-06-01
icon: image
category:
  - 学习
---

# 图像处理

图像处理的网课大家教的重点都不一样，并且让你掌握的不一定能让你过考试，因此还是看书重要。

- 像素：四邻域（十字）、D 邻域（四角）、八邻域（外围）
- 连通性：4 连通，8 连通，M 连通（q 在 p 的 4 邻域中，或 q 在 p 的对角邻域中且 q 的 4 邻域与 p 的 4 领域相交为空集）
- 最短路：4 通路，8 通路

直方图均衡：将概率累加值，和灰度级平分点作对比，映射到最近的灰度级。

直方图规定：一样，只不过映射到最近的规定累加值上。

## 运算

平移：$\begin{bmatrix}x'\\y'\\1\end{bmatrix}=\begin{bmatrix}1&0&T_x\\0&1&T_y\\0&0&1\end{bmatrix}\begin{bmatrix}x\\y\\1\end{bmatrix}$

尺度：$S=\begin{bmatrix}S_x&0&0\\0&S_y&0\\0&0&1\end{bmatrix}$

旋转：$\boldsymbol{R}_r=\begin{bmatrix}\cos\gamma&\sin\gamma&0\\-\sin\gamma&\cos\gamma&0\\0&0&1\end{bmatrix}$

M 张图像叠加均值，可以将零均值噪声降低到 $\displaystyle\sqrt{\frac1M}$，M=像素数。

## 滤波

### 空间域

- 低通滤波：图像平滑
  - 均值滤波：9\*1
  - 高斯滤波：[1 2 1;2 4 2;1 2 1]/16
  - 中值滤波：效果最好，保留边缘，去除孤立点
- 高通滤波：图像锐化
  - 一阶差分，二阶差分
  - Robert：[交叉差分](https://www.bilibili.com/video/BV1uH4y1g7vM/?p=14&t=199)
  - Prewitt
  - Sobel：Prewitt 的中点双倍加权
  - Laplace：二阶差分，对噪声敏感

### 频率域

振铃现象：亮点滤波后会形成明暗交替的圆形条纹，是 h(x,y) Sa 函数特性导致的

- 低通滤波
  - 理想：振铃现象明显
  - Butterworth：阶数 n <= 2 时振铃现象可以忽略
  - 高斯滤波器没有振铃现象，不过比起同阶 Butterworth 性能要差。
    - 高斯函数过傅里叶，仍然是高斯函数
  - 梯形滤波，比起理想减弱了振铃现象
  - 指数低通：低频率衰减快，n = 2 时成为高斯
- 高通滤波：名字与前三个一样，特性也差不多

### 形态学

将图像区域视为集合，对其做集合运算。

- 膨胀与腐蚀
- 开运算 = 腐蚀 + 膨胀（去除噪声点）
- 闭运算 = 膨胀 + 腐蚀（改善断裂）

可以用于图像形状识别

### 其他

同态滤波；取对数

应用：

- 低通：去栅格，去皱纹，去除断裂
- 高通：边缘检测叠加

## 2D DFT

定义：$F(u,v)=\frac{1}{MN}\sum_{x=0}^{M-1}\sum_{y=0}^{N-1}f(x,y)e^{-j2\pi(ux/M+vy/N)}$

平移特性：$\displaystyle f(x,y)e^{j2\pi(\frac{u_0x}M+\frac{v_0y}N)}\Leftrightarrow F(u-u_0,v-v_0)$

旋转特性：空间域图像旋转 $\theta$，频谱同样旋转 $\theta$

缩放特性：$f(ax,by)\Leftrightarrow\frac{1}{|ab|}F(u/a,v/b)$

相关性：$f(x,y)\circ h(x,y)\Leftrightarrow F^*(u,v)H(u,v)$

## 图像恢复

图像退化：随机噪声，成像模糊，运动拖尾，失真

通用退化模型：乘性(相当于过系统函数 H(x, y))和加性。乘性如果是线性会比较好恢复。

噪声分类：

- 高斯噪声：图像模糊，降低对比度
- 均匀噪声：亮度变化，纹理失真
- 脉冲噪声也称椒盐噪声，由一个或两个冲激形成的密度函数，像椒盐粒洒在图上一样，显著破坏图像质量。

### 滤波器

- 算数均值滤波器
- 几何均值滤波器，能保留更多细节
- 调和均值滤波器，适合滤除高斯噪声
- 逆调和均值滤波器，适合滤除椒盐类噪声
- 非线性均值滤波器
  - 中值，最大值，最小值，中点
  - 剪切均值：先去头尾再均值，滤除脉冲噪声效果好，加性差
  - 自适应中值，噪声大时性能更好

一般是先做椒盐噪声检测，再决定用哪种滤波器

### 恢复

已知 H(x, y) 的情况，可以从数学上设计反系统。

- 无约束恢复：不考虑恢复后图像的物理约束。
- 有约束恢复
  - 维纳滤波器，噪声越强，优势越明显
  - 有约束最小平方恢复，既有模糊又有噪声时比维纳滤波器好，只有模糊时基本一致

## 图像校正修补

仿射变换：$v^{'}=H_Av=\begin{bmatrix}A&t\\\mathbf{0}^{\top}&1\end{bmatrix}v$，A 为 2x2，t 为 2x1

一个三角形一定能通过仿射变换另一个三角形得到。

| 名称     | 特点                                                          |
| -------- | ------------------------------------------------------------- |
| 投影变换 | 保持向量在某个方向上的长度和角度不变的                        |
| 仿射变换 | 线性 + 平移，本质是将图像沿两个互相垂直的方向缩放             |
| 相似变换 | 图形形状不变（大小方向和位置可变）                            |
| 等距变换 | 等距变换相当于是平移 + 旋转，长度、面积、线段之间的夹角都不变 |
| 欧式变换 | 保持欧式距离不变                                              |

投影变换 ---左下角零矩阵--> 仿射变换 ---左上角矩阵正交--> 相似变换 ---左上角矩阵行列式为 1--> 等距变换 ---e 取 1--> 欧式变换

## 投影重建

CT 透射断层成像

ECT 发射断层成像，发射源在物体内部

Radon transform：$R_f(s,\theta)=\int_{-\infty}^{\infty}f(x,y) \mathrm{d}l=\int_{-\infty}^{\infty}\int_{-\infty}^{\infty}f(x,y)\delta(s-x\mathrm{cos}\theta-y\mathrm{sin}\theta) \mathrm{d}x\mathrm{d}y$，即区域在直线上的线积分

中心层定理：2D DFT = Radon transform + 1D DFT
