<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <title>my xxx time interval</title>
  </head>
  <body style="line-height: 1">
    <div style="text-align: center">
      <p id="average" style="font-size: 10px"></p>
    </div>
    <div id="container" style="width: 100%; height: 260px"></div>
    <script type="text/javascript" src="https://unpkg.com/@antv/g2plot@latest/dist/g2plot.min.js"></script>
    <script>
      const { Line } = G2Plot;
      const dateArray = [
"2023-01-02",
"2023-01-04",
"2023-01-06",
"2023-01-09",
"2023-01-12",
"2023-01-15",
"2023-01-18",
"2023-01-20",
"2023-01-22",
"2023-01-24",
"2023-01-25",
"2023-01-27",
"2023-01-29",
"2023-02-01",
"2023-02-02",
"2023-02-07",
"2023-02-09",
"2023-02-11",
"2023-02-13",
"2023-02-16",
"2023-02-20",
"2023-02-24",
"2023-03-02",
"2023-03-04",
"2023-03-09",
"2023-03-11",
"2023-03-11",
"2023-03-13",
"2023-03-16",
"2023-03-18",
"2023-03-23",
"2023-03-27",
"2023-03-30",
"2023-04-02",
"2023-04-05",
"2023-04-09",
"2023-04-11",
"2023-04-14",
"2023-04-16",
"2023-04-20",
"2023-04-20",
"2023-04-24",
"2023-04-27",
"2023-04-29",
"2023-05-02",
"2023-05-04",
"2023-05-07",
"2023-05-11",
"2023-05-13",
"2023-05-17",
"2023-05-20",
"2023-05-21",
"2023-05-25",
"2023-05-27",
"2023-05-31",
"2023-06-03",
"2023-06-05",
"2023-06-08",
"2023-06-11",
"2023-06-13",
"2023-06-17",
"2023-06-20",
"2023-06-23",
"2023-06-27",
"2023-06-29",
"2023-07-02",
"2023-07-05",
"2023-07-07",
"2023-07-09",
"2023-07-11",
"2023-07-14",
"2023-07-16",
"2023-07-17",
"2023-07-21",
"2023-07-23",
"2023-07-25",
"2023-07-28",
"2023-08-01",
"2023-08-03",
"2023-08-06",
"2023-08-07",
"2023-08-09",
"2023-08-12",
"2023-08-15",
"2023-08-17",
"2023-08-20",
"2023-08-22",
"2023-08-23",
"2023-08-26",
"2023-08-27",
"2023-08-29",
"2023-09-01",
"2023-09-03",
"2023-09-05",
"2023-09-08",
"2023-09-11",
"2023-09-13",
"2023-09-15",
"2023-09-18",
"2023-09-22",
"2023-09-23",
"2023-09-26",
"2023-09-29",
"2023-09-30",
"2023-10-02",
"2023-10-05",
"2023-10-09",
"2023-10-13",
"2023-10-15",
"2023-10-23",
"2023-10-24",
"2023-10-28",
"2023-10-31",
"2023-11-01",
"2023-11-03",
"2023-11-06",
"2023-11-09",
"2023-11-13",
"2023-11-15",
"2023-11-18",
"2023-11-20",
"2023-11-22",
"2023-11-26",
"2023-11-29",
"2023-12-02",
"2023-12-05",
"2023-12-08",
"2023-12-10",
"2023-12-12",
"2023-12-14",
"2023-12-17",
"2023-12-20",
"2023-12-24",
"2023-12-27",
"2023-12-30",
"2024-01-02",
"2024-01-04",
"2024-01-09",
"2024-01-13",
"2024-01-15",
"2024-01-20",
"2024-01-21",
"2024-01-23",
"2024-01-25",
"2024-01-28",
"2024-01-31",
"2024-02-01",
"2024-02-03",
"2024-02-06",
"2024-02-09",
"2024-02-11",
"2024-02-14",
"2024-02-16",
"2024-02-19",
"2024-02-22",
"2024-02-25",
"2024-02-27",
"2024-02-29",
"2024-03-02",
"2024-03-05",
"2024-03-07",
"2024-03-09",
"2024-03-13",
"2024-03-15",
"2024-03-19",
"2024-03-22",
"2024-03-24",
"2024-03-27",
"2024-03-29",
"2024-03-31",
"2024-04-04",
"2024-04-07",
"2024-04-11",
"2024-04-13",
"2024-04-16",
"2024-04-18",
"2024-04-20",
"2024-04-23",
"2024-04-25",
"2024-04-27",
"2024-04-30",
"2024-05-02",
"2024-05-04",
"2024-05-08",
"2024-05-10",
"2024-05-12",
"2024-05-15",
"2024-05-17",
"2024-05-22",
"2022-05-23",
"2022-05-26",
"2022-05-27",
"2022-05-29",
"2022-06-01",
"2022-06-02",
"2022-06-04",
"2022-06-05",
"2022-06-09",
      ];
      const calculateDateInterval = (startDate, endDate) => {
        const oneDay = 24 * 60 * 60 * 1000;
        const startTimestamp = new Date(startDate).getTime();
        const endTimestamp = new Date(endDate).getTime();
        const daysDifference = Math.round(Math.abs((startTimestamp - endTimestamp) / oneDay));
        return daysDifference;
      };

      const data = [];
      for (let i = 1; i < dateArray.length; i++) {
        const currentDate = dateArray[i];
        const previousDate = dateArray[i - 1];
        const interval = calculateDateInterval(previousDate, currentDate);
        data.push({
          date: currentDate,
          interval: interval,
        });
      }
      const linePlot = new Line("container", {
        data,
        xField: "date",
        yField: "interval",
        useDeferredLabel: true,
        legend: {
          position: "top",
        },
        slider: {
          start: 0,
          end: 1,
        },
      });

      linePlot.render();
      var rec = 0;
      for (const element of data) {
        rec += element["interval"];
      }
      document.getElementById("average").innerHTML = "average: " + String((rec / data.length).toFixed(6));
    </script>
  </body>
</html>
<style>
  body {
    background-color: white;
    color: black;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #22272e;
      color: white;
    }
  }
</style>
