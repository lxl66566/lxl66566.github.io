<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.79" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"包管理器","image":[""],"datePublished":"2024-08-06T00:00:00.000Z","dateModified":"2024-11-20T17:43:12.000Z","author":[]}</script><meta property="og:url" content="https://absx.pages.dev/coding/package_manager.html"><meta property="og:site_name" content="绝对值_x 的博客"><meta property="og:title" content="包管理器"><meta property="og:description" content="包管理器 前置文章： 20240805 晚，辗转反侧，想到了点灵感，因此有了这篇文章。 Nix 一个月前我从 Archlinux 叛逃到了 NixOS，因为 Nix 宣传的特性确实很吸引我。然而现在我只觉得上了贼船，很多宣称的优势达不到我的心理预期。（这里先不谈 ，单谈 Nix 包管理） Nix 的包多。 有点扯。虽然 repology 上 Nix 的..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-11-20T17:43:12.000Z"><meta property="article:tag" content="灵感"><meta property="article:tag" content="工具"><meta property="article:tag" content="包管理"><meta property="article:published_time" content="2024-08-06T00:00:00.000Z"><meta property="article:modified_time" content="2024-11-20T17:43:12.000Z"><link rel="alternate" type="application/rss+xml" href="https://absx.pages.dev/rss.xml" title="绝对值_x 的博客 RSS Feed"><title>包管理器 | 绝对值_x 的博客</title><meta name="description" content="包管理器 前置文章： 20240805 晚，辗转反侧，想到了点灵感，因此有了这篇文章。 Nix 一个月前我从 Archlinux 叛逃到了 NixOS，因为 Nix 宣传的特性确实很吸引我。然而现在我只觉得上了贼船，很多宣称的优势达不到我的心理预期。（这里先不谈 ，单谈 Nix 包管理） Nix 的包多。 有点扯。虽然 repology 上 Nix 的...">
    <link rel="preload" href="/assets/style-BoSJoHMD.css" as="style"><link rel="stylesheet" href="/assets/style-BoSJoHMD.css">
    <link rel="modulepreload" href="/assets/app-CtJ7dUV8.js"><link rel="modulepreload" href="/assets/package_manager.html-BIaCeqe2.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container external-link-icon pure has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/logo.jpg" alt><!----><span class="vp-site-name hide-in-pad">绝对值_x 的博客</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/coding/" aria-label="编程" iconsizing="height"><!--[--><i class="vp-icon fas fa-code" sizing="height"></i><!--]-->编程<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="爱好"><!--[--><i class="vp-icon fas fa-heart" sizing="height"></i>爱好<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">游戏</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/galgame.html" aria-label="galgame" iconsizing="both"><!--[--><i class="vp-icon fas fa-plane fa-fw" sizing="both"></i><!--]-->galgame<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/rhythm_games.html" aria-label="音游" iconsizing="both"><!--[--><i class="vp-icon fas fa-keyboard fa-fw" sizing="both"></i><!--]-->音游<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/Minecraft.html" aria-label="我的世界" iconsizing="both"><!--[--><i class="vp-icon fas fa-tree fa-fw" sizing="both"></i><!--]-->我的世界<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/other_games/" aria-label="其他游戏" iconsizing="both"><!--[--><i class="vp-icon fas fa-gamepad fa-fw" sizing="both"></i><!--]-->其他游戏<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">艺术</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/books.html" aria-label="读书" iconsizing="both"><!--[--><i class="vp-icon fas fa-book-open-reader fa-fw" sizing="both"></i><!--]-->读书<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/anime.html" aria-label="番剧" iconsizing="both"><!--[--><i class="vp-icon fas fa-play fa-fw" sizing="both"></i><!--]-->番剧<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/art.html" aria-label="其他艺术形式" iconsizing="both"><!--[--><i class="vp-icon fas fa-palette fa-fw" sizing="both"></i><!--]-->其他艺术形式<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/NSFW/" aria-label="NSFW" iconsizing="both"><!--[--><i class="vp-icon fas fa-h fa-fw" sizing="both"></i><!--]-->NSFW<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">其他</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/snack.html" aria-label="零食区" iconsizing="both"><!--[--><i class="vp-icon fas fa-cookie-bite fa-fw" sizing="both"></i><!--]-->零食区<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="杂项"><!--[--><i class="vp-icon fas fa-plus" sizing="height"></i>杂项<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/recommend_packages.html" aria-label="软件汇总" iconsizing="both"><!--[--><i class="vp-icon fas fa-cube fa-fw" sizing="both"></i><!--]-->软件汇总<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/recommend_websites.html" aria-label="网址汇总" iconsizing="both"><!--[--><i class="vp-icon fas fa-earth-asia fa-fw" sizing="both"></i><!--]-->网址汇总<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/college.html" aria-label="校内专栏" iconsizing="both"><!--[--><i class="vp-icon fas fa-graduation-cap fa-fw" sizing="both"></i><!--]-->校内专栏<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/reciter.html" aria-label="背词器" iconsizing="both"><!--[--><i class="vp-icon fas fa-eye fa-fw" sizing="both"></i><!--]-->背词器<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/articles/" aria-label="文章" iconsizing="height"><!--[--><i class="vp-icon fas fa-blog" sizing="height"></i><!--]-->文章<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/learning/" aria-label="学习" iconsizing="height"><!--[--><i class="vp-icon fas fa-pen" sizing="height"></i><!--]-->学习<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/gossip/" aria-label="闲聊" iconsizing="height"><!--[--><i class="vp-icon fas fa-comment" sizing="height"></i><!--]-->闲聊<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/essay/" aria-label="随笔" iconsizing="height"><!--[--><i class="vp-icon fas fa-newspaper" sizing="height"></i><!--]-->随笔<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/" aria-label="博客" iconsizing="height"><!--[--><i class="vp-icon fas fa-blog" sizing="height"></i><!--]-->博客<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/lxl66566/lxl66566.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item vp-action"><a class="vp-action-link" href="https://t.me/ab5_x" target="_blank" rel="noopener noreferrer" aria-label="telegram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z" fill="currentColor"></path></svg></a></div><div class="nav-item vp-action"><a class="vp-action-link" href="/rss.xml" target="_blank" rel="noopener noreferrer" aria-label="telegram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M320.16155 831.918c0 70.738-57.344 128.082-128.082 128.082S63.99955 902.656 63.99955 831.918s57.344-128.082 128.082-128.082 128.08 57.346 128.08 128.082z m351.32 94.5c-16.708-309.2-264.37-557.174-573.9-573.9C79.31155 351.53 63.99955 366.21 63.99955 384.506v96.138c0 16.83 12.98 30.944 29.774 32.036 223.664 14.568 402.946 193.404 417.544 417.544 1.094 16.794 15.208 29.774 32.036 29.774h96.138c18.298 0.002 32.978-15.31 31.99-33.58z m288.498 0.576C943.19155 459.354 566.92955 80.89 97.00555 64.02 78.94555 63.372 63.99955 77.962 63.99955 96.032v96.136c0 17.25 13.67 31.29 30.906 31.998 382.358 15.678 689.254 322.632 704.93 704.93 0.706 17.236 14.746 30.906 31.998 30.906h96.136c18.068-0.002 32.658-14.948 32.01-33.008z" fill="currentColor"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">搜索</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><!----><span class="vp-sidebar-title">思考</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/coding/philosophy_of_PL.html" aria-label="编程语言哲学胡言乱语" iconsizing="both"><!--[--><i class="vp-icon fas fa-question fa-fw" sizing="both"></i><!--]-->编程语言哲学胡言乱语<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><!----><span class="vp-sidebar-title">语言</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/coding/Rust.html" aria-label="Rust" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-rust fa-fw" sizing="both"></i><!--]-->Rust<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/python.html" aria-label="Python" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-python fa-fw" sizing="both"></i><!--]-->Python<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/Cpp.html" aria-label="C++" iconsizing="both"><!--[--><i class="vp-icon fas fa-code fa-fw" sizing="both"></i><!--]-->C++<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/shell.html" aria-label="shell script" iconsizing="both"><!--[--><i class="vp-icon fas fa-fish fa-fw" sizing="both"></i><!--]-->shell script<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/java.html" aria-label="Java" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-java fa-fw" sizing="both"></i><!--]-->Java<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/tsjs.html" aria-label="TypeScript" iconsizing="both"><!--[--><i class="vp-icon fas fa-code fa-fw" sizing="both"></i><!--]-->TypeScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/html.html" aria-label="html" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-html5 fa-fw" sizing="both"></i><!--]-->html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/csharp.html" aria-label="C#" iconsizing="both"><!--[--><i class="vp-icon fas fa-code fa-fw" sizing="both"></i><!--]-->C#<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/kotlin.html" aria-label="kotlin" iconsizing="both"><!--[--><i class="vp-icon fas fa-code fa-fw" sizing="both"></i><!--]-->kotlin<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/clojure.html" aria-label="Clojure" iconsizing="both"><!--[--><i class="vp-icon fas fa-code fa-fw" sizing="both"></i><!--]-->Clojure<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><!----><span class="vp-sidebar-title">工具</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/coding/github.html" aria-label="Github" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-github fa-fw" sizing="both"></i><!--]-->Github<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/Git.html" aria-label="Git" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-git-alt fa-fw" sizing="both"></i><!--]-->Git<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/vscode.html" aria-label="VSCode" iconsizing="both"><!--[--><i class="vp-icon fas fa-file-pen fa-fw" sizing="both"></i><!--]-->VSCode<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/vim.html" aria-label="vim" iconsizing="both"><!--[--><i class="vp-icon fas fa-keyboard fa-fw" sizing="both"></i><!--]-->vim<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/sql.html" aria-label="数据库" iconsizing="both"><!--[--><i class="vp-icon fas fa-database fa-fw" sizing="both"></i><!--]-->数据库<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/container.html" aria-label="容器" iconsizing="both"><!--[--><i class="vp-icon fas fa-box fa-fw" sizing="both"></i><!--]-->容器<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/coding/package_manager.html" aria-label="包管理器" iconsizing="both"><!--[--><i class="vp-icon fas fa-cubes fa-fw" sizing="both"></i><!--]-->包管理器<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><!----><span class="vp-sidebar-title">前端</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/coding/nodejs.html" aria-label="JS 运行时" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-node-js fa-fw" sizing="both"></i><!--]-->JS 运行时<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/tsjs.html" aria-label="TypeScript" iconsizing="both"><!--[--><i class="vp-icon fas fa-code fa-fw" sizing="both"></i><!--]-->TypeScript<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/css.html" aria-label="CSS" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-css fa-fw" sizing="both"></i><!--]-->CSS<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/html.html" aria-label="html" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-html5 fa-fw" sizing="both"></i><!--]-->html<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/vue.html" aria-label="Vue.js" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-vuejs fa-fw" sizing="both"></i><!--]-->Vue.js<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/react.html" aria-label="React" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-react fa-fw" sizing="both"></i><!--]-->React<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/solidjs.html" aria-label="SolidJS" iconsizing="both"><!--[--><i class="vp-icon fas fa-arrow-up-right-dots fa-fw" sizing="both"></i><!--]-->SolidJS<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-header"><!----><span class="vp-sidebar-title">其他</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/coding/bagu.html" aria-label="八股" iconsizing="both"><!--[--><i class="vp-icon fas fa-book-skull fa-fw" sizing="both"></i><!--]-->八股<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/android.html" aria-label="Android" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-android fa-fw" sizing="both"></i><!--]-->Android<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/algorithm.html" aria-label="算法" iconsizing="both"><!--[--><i class="vp-icon fas fa-wand-sparkles fa-fw" sizing="both"></i><!--]-->算法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/bot.html" aria-label="bot" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-bots fa-fw" sizing="both"></i><!--]-->bot<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/coding/octave.html" aria-label="Matlab/Octave" iconsizing="both"><!--[--><i class="vp-icon fas fa-brands fa-octopus-deploy fa-fw" sizing="both"></i><!--]-->Matlab/Octave<!----></a></li></ul></section></li></ul><!----></aside><!--[--><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><i class="vp-icon fas fa-cubes" sizing="height"></i>包管理器</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024年8月6日</span><meta property="datePublished" content="2024-08-06T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 9 分钟</span><meta property="timeRequired" content="PT9M"></span><span class="page-category-info" aria-label="分类"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item clickable" role="navigation">编程</span><!--]--><meta property="articleSection" content="编程"></span><span class="page-tag-info" aria-label="标签"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item clickable" role="navigation">包管理</span><span class="page-tag-item clickable" role="navigation">工具</span><span class="page-tag-item clickable" role="navigation">灵感</span><!--]--><meta property="keywords" content="包管理,工具,灵感"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="包管理器" tabindex="-1"><a class="header-anchor" href="#包管理器"><span>包管理器</span></a></h1><blockquote><p>前置文章：<a class="route-link" href="/articles/linux/package.html">linux - 包管理与使用推荐</a></p></blockquote><p>20240805 晚，辗转反侧，想到了点灵感，因此有了这篇文章。</p><!-- ## scoop

最早用的包管理器应该是 scoop。让我接触到只要知道名字，一行命令就能安装软件，省去所有环境变量的麻烦配置的方法。

不过 scoop 本身用 powershell 写的，只支持 windows，代码也比较捞。而且近年来直连 Github 网络质量下降，对于没有代理的新人还是不太友好的。

## pacman

我最早主用的 linux distro 就是 Archlinux， --><h2 id="nix" tabindex="-1"><a class="header-anchor" href="#nix"><span>Nix</span></a></h2><p>一个月前我从 Archlinux 叛逃到了 NixOS，因为 Nix 宣传的特性确实很吸引我。然而现在我只觉得上了贼船，很多宣称的优势达不到我的心理预期。（这里先不谈 <a class="route-link" href="/articles/linux/nix.html#%E5%8A%9D%E9%80%80">NixOS 的其他缺陷</a>，单谈 Nix 包管理）</p><ol><li>Nix 的包多。 <ul><li>有点扯。虽然 <a href="https://repology.org/repositories/packages" target="_blank" rel="noopener noreferrer">repology</a> 上 Nix 的数据很好看，但是 <ol><li>Nix 有很多不同版本的相同软件是算不同包的；</li><li>编程语言（例如 haskell）的 dev package 占了很大一部分数量，而非可使用的二进制软件包。</li></ol></li></ul></li><li>Nix 把所有包都放在一个 store 下，使用 hash 对包进行标识。 <ul><li>既然都上 hash 了，那我肯定期望我能安装任何包且不发生冲突，并且我更新的任何依赖都不应该 break 上层应用版本。然而： <ul><li>安装同一个包的不同 feature 会冲突，例如 <em>yt-dlp</em> 和 <em>yt-dlp-light</em>。这倒能理解，毕竟系统也不知道要用哪个链到 <code>/etc/profiles/per-user/&lt;user&gt;/bin/</code>。</li><li>关于更新依赖 break 版本，我自己就亲身经历了一次：前段时间的 python 更新到 3.12 break 了一大堆包，例如我用的 activitywatch。原因大概是 <strong>nix 通过 <code>flake.lock</code> 锁全局版本</strong>，而软件自己是不锁自身依赖版本的。<code>pkgs.python</code>（无版本后缀）是滚动更新的，它更新到 3.12，依赖它的包也会自动更新依赖。如果要指定旧版本应该需要依赖 <code>pkgs.python311</code>，这也是 Nix 不同版本算不同包的一个原因吧。但这就让我很不爽，因为一个软件而锁死整个系统版本，要么就放弃这个软件，那跟一般的发行版不是差不多吗？你都上了 hash，膨胀了这么多路径，还这么捞？</li><li>由上述，<code>pkgs.python311</code> 和 <code>pkgs.python313</code> 也是不能同时装的。。。因为这两个算是平等的两个包，而不是同一个包的新旧关系，系统不知道用哪个。。当然如果只是作为其他软件的依赖，是可以共存的。这算是一点微弱优势，但是挽回不了局面；并且很吃打包者水平（很多就直接依赖 <code>pkgs.python</code> 完事了，而不会去依赖 <code>pkgs.python311</code>），否则此次 break 就不该发生。</li></ul></li></ul></li><li>Nix 不推荐打 bin 包，每个包都从源码编译（如果有的话），bin 则通过 cache server 和 mirror server 提供。 <ul><li>首先大家想必都喜欢用 bin 包吧，就连 Gentoo 也 goes Binary 了不是吗。<s>我超喜欢，甚至写了 <a href="https://github.com/lxl66566/bpm" target="_blank" rel="noopener noreferrer">bpm</a>（</s></li><li>第一次听到这个 cache 的思路觉得还挺清奇的，这样确实没有必要多打一个 bin。但是实际体验并不佳。 <ol><li>官方的 cachix 在国外，速度慢，没多少人用。</li><li>一般大家都是用各高校镜像站，然而 Nix 镜像不像其他滚动镜像只存一个最新版本，Nix 是需要存多个版本的。高校镜像的钱也不是吹来的，本来包就多，还有国内 PCDN 恶意刷流，在此之上还要保证足够服务质量算是比较困难了。于是镜像站同步速率放缓，也会导致 update 时有的软件包在 cache 里找不到需要自己编译，到头来不打 bin 包吃亏的还是自己。</li><li>有一些第三方提供自建 cache server 的服务，例如 garnix。但是人家是新兴商业公司，免费版限时，而且据说经常卡死，把时间配额耗完。而且自建 cache server 只是换了个地方编译而已，本质还是编译，并没有为全球变暖做出什么改善。</li></ol></li><li>结果就是我也能看到有挺多人打包了 bin 上去，bin 和 unbin 混在一起，反而让人迷惑。</li><li>随着包越来越多，cache server 的编译负担会越来越重。服务器的性能不是无限增长的。别人已经编译过一次的 bin 包还需要 cache server 再次编译，感觉也不是很 bin。</li><li>自己改过的 drv 一定需要重新编译，即使只是改一个运行参数。</li></ul></li><li>store 下的包通过链接进系统。 <ul><li>NixOS 管理整个系统，没什么好说。好处是可以玩一些 root on tmpfs 的骚操作，最大的问题是 NixOS 这样搞不支持 <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard" target="_blank" rel="noopener noreferrer">FHS</a> 标准，装个啥软件，找个啥 lib，搞个啥编程开发，全部都要自己去写 <code>shell.nix</code> 或 <code>flake.nix</code>。像我这种愣头青，还不会 nix 语法就直接莽上 NixOS 的就很难受，干个啥都相当于打包（文档还烂）。 <ul><li>nix 语言的学习曲线也是公认的陡峭；而且难的不是语言，而是 builtin functions/variables，查也查不到。例如我想看看 <code>wrapProgram</code> 的详细用法，结果到处搜不到文档，最后求助群友问哪里能看详细 manual，群友扔给我 Github 源码… 这种学习的 overheads 不可谓不高。</li></ul></li><li>我感觉坏处是比好处大的。</li></ul></li><li>版本回退时会清空应用数据，例如 microsoft edge，telegram。回退其实比想象中要频繁，例如一发 rebuild 在后期失败了，再次回到 old conf 时就算是回退。于是我莫名其妙丢失了许多应用数据与 cookies。</li></ol><p>除了这些特性，还有一些表现：</p><ol><li>Nix 每次更新下载全量 nixpkgs metadata，是一个经典的 40+M 的 <code>.tar.gz</code>，里面包的啥玩意没拆过不知道，但是这量还是有点大的。看看隔壁 Arch，人家 binary 数据库也就 10M 左右。（emmm，不过人家 core 包量级确实小，好像也没得说）</li></ol><h2 id="打包" tabindex="-1"><a class="header-anchor" href="#打包"><span>打包</span></a></h2><h3 id="语言" tabindex="-1"><a class="header-anchor" href="#语言"><span>语言</span></a></h3><p>Arch 用的 PKGBUILD 是简单粗暴 bash。虽然也可以引入个 python 依赖去写 py，但是总归是不方便的。</p><p>Nix 自身即高级函数式语言，但是前面提到学习曲线陡峭，加之 Nix 的报错非常模糊，因此我也不喜欢。</p><h3 id="更新" tabindex="-1"><a class="header-anchor" href="#更新"><span>更新</span></a></h3><p>Arch 软件包需要自己关注版本更新，并且手动 update version。虽然有例如 updpkgsums 等东西帮我把其他的活干完，但这也只能算是半自动。而且如果不开隔离环境，打出来的包可能在其他人系统上跑不了，因为我有的依赖别人不一定有。</p><p>Nix 好一点，Nix 打包默认隔离环境，也就是所有系统上的 build 表现应该是一样的。因此上 nixpkgs 提交软件包只要跑过了 CI 就没啥问题。但是 PR 也都要人来合，不像 Arch AUR 归自己，想 push 就 push。因此也只能算是半自动。</p><p>貌似也有一些 bot 提供了简单的全自动实现，例如 Arch 的 lilac，不过我没用过不清楚效果，nixpkgs 这里也不懂有没有 update bot（应该得有吧），反正有个 nixpkgs-merge-bot。</p><h2 id="我的灵感" tabindex="-1"><a class="header-anchor" href="#我的灵感"><span>我的灵感</span></a></h2><p>喷了一大通，总算来到了灵感环节。我夜里想到一个 <s>universal package manager</s> 的方案（名字被用了！）。可能有一些尚未考虑到的 cases，如果能帮我指出，我会非常感激。</p><h3 id="前端" tabindex="-1"><a class="header-anchor" href="#前端"><span>前端</span></a></h3><ul><li>支持所有脚本语言编写构建脚本！与其做一个类似 nix 的万能但难学的语言，不如充分利用现有语言。提供内置的 python, lua, amber, nix, fish, zsh, nu, javascript... 语言解释器的下载。构建脚本继承 PKGBUILD 的简单粗暴，分成几个阶段（pre-, install, post-），每个阶段只需要用对应解释器运行对应代码即可。 <ul><li>不防恶意代码，但会在隔离环境构建（bwrap）。</li></ul></li><li>所有的 <code>-bin</code>, <code>-git</code> 和指定的 version 都算作同一个包，写在同一个 manifest 里面。安装时默认优先安装 bin 包，也可以指定行为。</li><li>可以用任意结构化格式储存 manifest！json, toml, yaml, ron, 甚至非结构化的 markdown!</li><li>打包脚本提供少量 builtin 变量，例如 <code>#OUT#</code>，<code>#TMP#</code>，<code>#ARCH#</code> 等，执行时直接全局替换完事。也可以选择不使用，而直接在脚本中调库获取。这样可以最小化打包者的心智负担。</li><li>在打包脚本中写版本更新与测试逻辑！方便使用 CI 全自动更新版本。（经验来自 dependabot）</li><li>每个打包脚本内都有依赖锁（hash + version），保证依赖版本不变。更新单个包绝不会破坏其上层软件包。</li></ul><h3 id="后端" tabindex="-1"><a class="header-anchor" href="#后端"><span>后端</span></a></h3><ul><li>类似 Nix，使用 hash 前缀，将所有软件包放在一个地方统一管理！允许多版本共存，并将脚本中指定的内容<strong>遵循 FHS 标准</strong>链接到标准位置。 <ul><li><s>统一管理就不用像 pacman 那样存所有软件的安装文件位置。只需存一个 hash 即可。</s> 呃，还要存链接位置，差不多</li><li>多版本名字冲突无法链接到同一位置？在链接后加上版本号解决；最高版本优先（无需添加版本号）。</li><li>显然一次链接几万个文件开销比较大，因此不能像 nix 那样玩 root on tmpfs。</li><li>链接的目的是什么？让依赖 FHS 的<strong>第三方软件/插件</strong>能够正常运行。但是通过包管理器本身安装的软件还是正常隔离环境运行的。</li><li>如果第三方软件不读符号链接？爬。 <ul><li>要么要用的人自己写 wrapper，从 store 链；要么就自己打包。</li></ul></li></ul></li></ul><h3 id="分发" tabindex="-1"><a class="header-anchor" href="#分发"><span>分发</span></a></h3><ul><li>P2P torrent 网络分发，所有下载了包的人都自动加入上传。 <ul><li>为了防止恶意修改包后上传，每个包都会过两种不同的 hash 算法；hash 值是交给中心 server（github） 存储的，不会被篡改。</li></ul></li><li>(Optional) 只下载不上传？<s>学习 PT 站经验</s> 开个玩笑</li></ul><h3 id="基础设施" tabindex="-1"><a class="header-anchor" href="#基础设施"><span>基础设施</span></a></h3><p>写一点 converter 把 AUR 和 Nix 那边的现有打包脚本偷来（）</p><h2 id="external" tabindex="-1"><a class="header-anchor" href="#external"><span>external</span></a></h2><ul><li><a href="https://zhuanlan.zhihu.com/p/782348147" target="_blank" rel="noopener noreferrer">现代软件打包者的安全噩梦</a>，但是我不太赞同</li></ul></div><!----><!----><!----></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">最近更新：</span><time class="vp-meta-info" datetime="2024-11-20T17:43:12.000Z" data-allow-mismatch>2024/11/20 17:43</time></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/coding/container.html" aria-label="容器" iconsizing="both"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><i class="vp-icon fas fa-box" sizing="height"></i>容器</div></a><!----></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div style="display: flex;
align-items: center;
justify-content: center;
height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);
--icon-size: 48px;
display: inline-block;
width: var(--icon-size);
height: var(--icon-size);
background-color: currentcolor;
-webkit-mask-image: var(--loading-icon);
mask-image: var(--loading-icon);
"></span></div></div><!----><!--]--></main><!--]--><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CtJ7dUV8.js" defer></script>
  </body>
</html>
