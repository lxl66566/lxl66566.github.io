<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.48" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://absx.pages.dev/articles/linux/install_and_config.html"><meta property="og:site_name" content="绝对值_x的博客"><meta property="og:title" content="安装与配置（Arch 篇）"><meta property="og:description" content="安装与配置（Arch 篇） 安装 配置 这里是 的 linux 板块内容。设置项均为 archlinux，且排名不分先后。 系统设置 基础 alias e：default $EDITOR l： gp: git pull gfixup: docker: podman makepkg： bwrap。 pack: 偷来的 gpt: 简单跑一个本地模型(src..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-12-22T15:54:35.000Z"><meta property="article:tag" content="Linux"><meta property="article:tag" content="桌面端"><meta property="article:published_time" content="2023-10-28T00:00:00.000Z"><meta property="article:modified_time" content="2024-12-22T15:54:35.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"安装与配置（Arch 篇）","image":[""],"datePublished":"2023-10-28T00:00:00.000Z","dateModified":"2024-12-22T15:54:35.000Z","author":[]}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-MKRDBH1ZP1"></script><script><!-- Google tag (gtag.js) -->
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MKRDBH1ZP1');</script><link rel="icon" href="/logo.jpg" sizes="706x706"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/logo.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/logo.jpg"><meta name="msapplication-TileColor" content="#46bd87"><link rel="alternate" type="application/rss+xml" href="https://absx.pages.dev/rss.xml" title="绝对值_x的博客 RSS Feed"><title>安装与配置（Arch 篇） | 绝对值_x的博客</title><meta name="description" content="安装与配置（Arch 篇） 安装 配置 这里是 的 linux 板块内容。设置项均为 archlinux，且排名不分先后。 系统设置 基础 alias e：default $EDITOR l： gp: git pull gfixup: docker: podman makepkg： bwrap。 pack: 偷来的 gpt: 简单跑一个本地模型(src...">
    <link rel="preload" href="/assets/style-16JaBiVU.css" as="style"><link rel="stylesheet" href="/assets/style-16JaBiVU.css">
    <link rel="modulepreload" href="/assets/app-lv7BXT0A.js"><link rel="modulepreload" href="/assets/install_and_config.html-CSEN2ubx.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container external-link-icon pure has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.jpg" alt><!----><span class="vp-site-name hide-in-pad">绝对值_x的博客</span></a><!--]--><!----></div><div class="vp-navbar-center"><!----><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/coding/" aria-label="编程"><!--[--><span class="font-icon icon fas fa-code" style=""></span><!--]-->编程<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="爱好"><!--[--><span class="font-icon icon fas fa-heart" style=""></span>爱好<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">游戏</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/galgame.html" aria-label="galgame"><!--[--><span class="font-icon icon fas fa-plane" style=""></span><!--]-->galgame<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/rhythm_games.html" aria-label="音游"><!--[--><span class="font-icon icon fas fa-keyboard" style=""></span><!--]-->音游<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/Minecraft.html" aria-label="我的世界"><!--[--><span class="font-icon icon fas fa-tree" style=""></span><!--]-->我的世界<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/other_games/" aria-label="其他游戏"><!--[--><span class="font-icon icon fas fa-gamepad" style=""></span><!--]-->其他游戏<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">艺术</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/books.html" aria-label="读书"><!--[--><span class="font-icon icon fas fa-book-open-reader" style=""></span><!--]-->读书<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/anime.html" aria-label="番剧"><!--[--><span class="font-icon icon fas fa-play" style=""></span><!--]-->番剧<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/art.html" aria-label="其他艺术形式"><!--[--><span class="font-icon icon fas fa-palette" style=""></span><!--]-->其他艺术形式<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/NSFW/" aria-label="NSFW"><!--[--><span class="font-icon icon fas fa-h" style=""></span><!--]-->NSFW<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">其他</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/hobbies/snack.html" aria-label="零食区"><!--[--><span class="font-icon icon fas fa-cookie-bite" style=""></span><!--]-->零食区<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="杂项"><!--[--><span class="font-icon icon fas fa-plus" style=""></span>杂项<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/recommend_packages.html" aria-label="软件汇总"><!--[--><span class="font-icon icon fas fa-cube" style=""></span><!--]-->软件汇总<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/recommend_websites.html" aria-label="网址汇总"><!--[--><span class="font-icon icon fas fa-earth-asia" style=""></span><!--]-->网址汇总<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/college.html" aria-label="校内专栏"><!--[--><span class="font-icon icon fas fa-graduation-cap" style=""></span><!--]-->校内专栏<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/farraginous/reciter.html" aria-label="背词器"><!--[--><span class="font-icon icon fas fa-eye" style=""></span><!--]-->背词器<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/articles/" aria-label="文章"><!--[--><span class="font-icon icon fas fa-blog" style=""></span><!--]-->文章<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/learning/" aria-label="学习"><!--[--><span class="font-icon icon fas fa-pen" style=""></span><!--]-->学习<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/gossip/" aria-label="闲聊"><!--[--><span class="font-icon icon fas fa-comment" style=""></span><!--]-->闲聊<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/essay/" aria-label="随笔"><!--[--><span class="font-icon icon fas fa-newspaper" style=""></span><!--]-->随笔<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/" aria-label="博客"><!--[--><span class="font-icon icon fas fa-blog" style=""></span><!--]-->博客<!----></a></div></nav><!--]--><!----></div><div class="vp-navbar-end"><!----><!--[--><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/lxl66566/lxl66566.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item vp-action"><a class="vp-action-link" href="https://t.me/ab5_x" target="_blank" rel="noopener noreferrer" aria-label="telegram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M248,8C111.033,8,0,119.033,0,256S111.033,504,248,504,496,392.967,496,256,384.967,8,248,8ZM362.952,176.66c-3.732,39.215-19.881,134.378-28.1,178.3-3.476,18.584-10.322,24.816-16.948,25.425-14.4,1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25,5.342-39.5,3.652-3.793,67.107-61.51,68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608,69.142-14.845,10.194-26.894,9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7,18.45-13.7,108.446-47.248,144.628-62.3c68.872-28.647,83.183-33.623,92.511-33.789,2.052-.034,6.639.474,9.61,2.885a10.452,10.452,0,0,1,3.53,6.716A43.765,43.765,0,0,1,362.952,176.66Z" fill="currentColor"></path></svg></a></div><div class="nav-item vp-action"><a class="vp-action-link" href="/rss.xml" target="_blank" rel="noopener noreferrer" aria-label="telegram"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M320.16155 831.918c0 70.738-57.344 128.082-128.082 128.082S63.99955 902.656 63.99955 831.918s57.344-128.082 128.082-128.082 128.08 57.346 128.08 128.082z m351.32 94.5c-16.708-309.2-264.37-557.174-573.9-573.9C79.31155 351.53 63.99955 366.21 63.99955 384.506v96.138c0 16.83 12.98 30.944 29.774 32.036 223.664 14.568 402.946 193.404 417.544 417.544 1.094 16.794 15.208 29.774 32.036 29.774h96.138c18.298 0.002 32.978-15.31 31.99-33.58z m288.498 0.576C943.19155 459.354 566.92955 80.89 97.00555 64.02 78.94555 63.372 63.99955 77.962 63.99955 96.032v96.136c0 17.25 13.67 31.29 30.906 31.998 382.358 15.678 689.254 322.632 704.93 704.93 0.706 17.236 14.746 30.906 31.998 30.906h96.136c18.068-0.002 32.658-14.948 32.01-33.008z" fill="currentColor"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-outlook-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-outlook-dropdown"><!----></div></button></div><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--><!--]--><!----><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/articles/linux/" aria-label="linux"><!--[--><span class="font-icon icon fas fa-brands fa-linux" style=""></span><!--]-->linux<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/articles/linux/basic.html" aria-label="基础"><!--[--><span class="font-icon icon fas fa-microchip" style=""></span><!--]-->基础<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/articles/linux/install_and_config.html" aria-label="安装与配置（Arch 篇）"><!--[--><span class="font-icon icon fas fa-archway" style=""></span><!--]-->安装与配置（Arch 篇）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/articles/linux/nix.html" aria-label="安装与配置（NixOS 篇）"><!--[--><span class="font-icon icon fas fa-regular fa-snowflake" style=""></span><!--]-->安装与配置（NixOS 篇）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/articles/linux/openwrt.html" aria-label="OpenWRT"><!--[--><span class="font-icon icon fas fa-wifi" style=""></span><!--]-->OpenWRT<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/articles/linux/package.html" aria-label="包管理与使用推荐"><!--[--><span class="font-icon icon fas fa-cubes" style=""></span><!--]-->包管理与使用推荐<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/articles/linux/problem.html" aria-label="遇到的问题"><!--[--><span class="font-icon icon fas fa-regular fa-circle-xmark" style=""></span><!--]-->遇到的问题<!----></a></li></ul><!----></aside><!--[--><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fas fa-archway" style=""></span>安装与配置（Arch 篇）</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-10-28T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 11 分钟</span><meta property="timeRequired" content="PT11M"></span><span class="page-category-info" aria-label="分类"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item clickable" role="navigation">教程</span><!--]--><meta property="articleSection" content="教程"></span><span class="page-tag-info" aria-label="标签"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item clickable" role="navigation">Linux</span><span class="page-tag-item clickable" role="navigation">桌面端</span><!--]--><meta property="keywords" content="Linux,桌面端"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc"><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#安装">安装</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#配置">配置</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#系统设置">系统设置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#输入法">输入法</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#代理">代理</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#文件系统设置">文件系统设置</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#kde-及其配套设施">kde 及其配套设施</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#快照">快照</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#snapper">snapper</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#timeshift">timeshift</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#驱动">驱动</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#显卡驱动">显卡驱动</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#音频驱动">音频驱动</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#更换内核">更换内核</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#混成器">混成器</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content"><h1 id="安装与配置-arch-篇" tabindex="-1"><a class="header-anchor" href="#安装与配置-arch-篇"><span>安装与配置（Arch 篇）</span></a></h1><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-6-0" aria-selected="true">Archlinux</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-6-1" aria-selected="false">ArchWSL</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-6-2" aria-selected="false">TermuxArch</button></div><!--[--><div class="vp-tab active" id="tab-6-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Archlinux</div><!--[--><p>20230819 收到购买的硬盘，正式安装 archlinux（双系统）。安装过程还挺坎坷的，在<a class="route-link" href="/articles/linux/problem.html">问题区</a>可见一斑。</p><ul><li><a href="https://arch.icekylin.online/" target="_blank" rel="noopener noreferrer">中文教程</a>，讲的比较好，有不少针对中文用户的细节。 <ul><li>本人也参与了一些微小的错误修正和内容追加。</li></ul></li><li>不过还是建议 <a href="https://wiki.archlinuxcn.org/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97" target="_blank" rel="noopener noreferrer">archwiki - installation guide</a> 也一起看看，取长补短。</li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p><a href="https://wiki.archlinuxcn.org" target="_blank" rel="noopener noreferrer">archwiki</a> 是最官方、最权威、最详细的指南，可以多看看，发生分歧时，以 wiki 为准。</p></div><p>分两块盘的优点：不用担心 windows 更新崩了 grub 引导<span class="heimu" title="你知道的太多了">不过我已经关了自动更新</span>；出现失误不用担心丢另一块盘的数据<span class="heimu" title="你知道的太多了">安装时我确实失手格掉了全盘数据和分区</span>。</p><h4 id="分区" tabindex="-1"><a class="header-anchor" href="#分区"><span>分区</span></a></h4><p>如果想使用多个内核，<em>boot 分区</em> 分 512M 可能不够。不缺的话建议直接 1G。</p><p>swap 无所谓，不分都行，<s>反正我有大 RAM</s>。（即使我分了，我也<a href="#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE">调低了 swappiness</a>。）</p><p>由于我用 btrfs，因此只要把其他空间全部给主分区就行了。</p><h4 id="添加-windows-引导" tabindex="-1"><a class="header-anchor" href="#添加-windows-引导"><span>添加 windows 引导</span></a></h4><p>由于双系统，安装后我肯定是都使用 grub 作为引导（开 bios 挺麻烦的），但是我双系统分别在两块不同硬盘上，无法使用 <em>os-prober</em> 自动共存。因此我使用如下方法进行自动检测并添加：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /mnt/windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">mount</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /dev/</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">windows</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ef</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /mnt/windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">grub-mkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /boot/grub/grub.cfg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">umount</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /mnt/windows</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-6-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">ArchWSL</div><!--[--><h3 id="archwsl" tabindex="-1"><a class="header-anchor" href="#archwsl"><span><a href="https://github.com/yuk7/ArchWSL" target="_blank" rel="noopener noreferrer">ArchWSL</a></span></a></h3><ul><li>安装： <ol><li>设置中搜索 <em>启用或关闭 Windows 功能</em>，打开 HyperV 选项。</li><li>安装 wsl 与 archwsl。</li></ol><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" data-title="powershell" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">Enable-WindowsOptionalFeature</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">Online </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">FeatureName Microsoft</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">Windows</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">Subsystem</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">Linux</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># 重启</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">update</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">install </span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">no</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">distribution</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">scoop install archwsl</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>拉一个 <code>.wslconfig</code>，例如<a href="https://github.com/lxl66566/my-key-data/blob/main/config/.wslconfig" target="_blank" rel="noopener noreferrer">我的</a>。否则网络啥的可能会出问题。</li><li>参照<a href="https://wsldl-pg.github.io/ArchW-docs/How-to-Setup/" target="_blank" rel="noopener noreferrer">官方文档</a>使用 pacman。</li><li>激活 WSL 后，WSL 的 bash.exe 优先级可能会高于 git bash。但是很多时候 git bash 比 WSL bash 更好用（比如 wsl2 的 filesystem 非常慢，但是 git bash 不走 wsl 所以很快），于是我会将 WSL bash 换成 git bash：删掉 <code>C:\Windows\System32\bash.exe</code>。也是<a href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6">改拥有者 + 改权限</a>那一套。</li></ol></li><li>更新 ArchWSL：从<a href="https://github.com/yuk7/wsldl/releases" target="_blank" rel="noopener noreferrer">wsldl</a>下载 <code>wsldl.exe</code>，改名为 <code>arch.exe</code> 并替换。</li></ul><!--]--></div><div class="vp-tab" id="tab-6-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">TermuxArch</div><!--[--><p>20230920 下午安装 TermuxArch，也踩了不少坑。</p><ol><li>termux 本身的 pkg 需要配置好镜像源（<code>termux-change-repo</code>）。</li><li>安装时如果有报错要注意看，可能需要： <ul><li>手动在移动端环境创建目录</li><li>手动安装一些包，例如 bsdtar</li></ul></li><li>安装完成后为 pacman 添加镜像需要选择 arm 的而不是默认的 x86_64。<div class="language-toml line-numbers-mode" data-highlighter="shiki" data-ext="toml" data-title="toml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> = h</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ttp://mirrors.tuna.tsinghua.edu.cn/archlinuxarm/$arch/$repo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> = h</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ttp://mirrors.ustc.edu.cn/archlinuxarm/$arch/$repo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> = h</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ttp://mirrors.stuhome.net/archlinuxarm/$arch/$repo</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><!--]--></div><!--]--></div><h2 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h2><p>这里是 <em><a class="route-link" href="/articles/windows_setting.html">文章 - 设置电脑</a></em> 的 linux 板块内容。设置项均为 archlinux，且排名不分先后。</p><h3 id="系统设置" tabindex="-1"><a class="header-anchor" href="#系统设置"><span>系统设置</span></a></h3><ol><li>基础 alias <ul><li><code>e</code>：default <code>$EDITOR</code></li><li><code>l</code>：<a class="route-link" href="/articles/linux/package.html#eza">eza</a></li><li><code>gp</code>: <code>git pull</code></li><li><code>gfixup</code>: <a class="route-link" href="/coding/Git.html#%E8%87%AA%E5%8A%A8%E5%8C%96-squash">git 奇技淫巧 # 自动化 squash</a></li><li><code>docker</code>: <code>podman</code> <a class="route-link" href="/coding/container.html">-&gt; container</a></li><li><code>makepkg</code>：<a class="route-link" href="/articles/linux/package.html#%E6%B5%8B%E8%AF%95">抄来的</a> bwrap。<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">alias</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> makepkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;bwrap --unshare-all --share-net --die-with-parent \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">--ro-bind /usr /usr --ro-bind /etc /etc --proc /proc --dev /dev \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">--symlink usr/bin /bin --symlink usr/bin /sbin --symlink usr/lib /lib --symlink usr/lib /lib64 \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">--bind $PWD /build/$PWD --ro-bind /var/lib/pacman /var/lib/pacman --ro-bind ~/.ccache ~/.ccache \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">--bind ~/.cache/ccache ~/.cache/ccache --chdir /build/$PWD /usr/bin/makepkg&#39;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><code>pack</code>: 偷来的<a class="route-link" href="/articles/linux/package.html#%E6%89%93%E5%8C%85">一键打包更新</a></li><li><code>gpt</code>: 简单跑一个本地模型(<a href="https://github.com/jmorganca/ollama" target="_blank" rel="noopener noreferrer">src</a>)<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> serve</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">/dev/null</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> &amp;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> llama2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li>设置 <a href="https://wiki.archlinux.org/title/Zram#Using_zram-generator" target="_blank" rel="noopener noreferrer">zram swap</a>。 <ul><li>我使用 <code>zram-generator</code> <span class="vp-badge info" style="">AUR</span>。 <ul><li><a href="https://github.com/systemd/zram-generator/blob/main/zram-generator.conf.example" target="_blank" rel="noopener noreferrer">conf example</a></li><li><a href="https://github.com/lxl66566/dotfile/blob/archlinux/etc/systemd/zram-generator.conf" target="_blank" rel="noopener noreferrer">我的 zram-generator 配置</a></li></ul></li></ul></li><li>设置 <code>/etc/fstab</code><ul><li><s><a class="route-link" href="/articles/ramdisk.html">挂载 tmpfs</a></s> 后来使用 zram <span class="vp-badge info" style="">2.</span> 了。 <ul><li>Archlinux 实际上有 <a href="https://wiki.archlinux.org/title/Tmpfs#Usage" target="_blank" rel="noopener noreferrer">tmpfs 挂载的默认值</a>，然而我还是手动搞了，可以调整容量。</li><li>添加 <code>noatime</code> 标识，即不带访问时间 (<a href="https://t.me/archlinuxcn_group/2900548" target="_blank" rel="noopener noreferrer">ref</a>)</li><li>删除 <code>subvolid</code>，详见 <a class="route-link" href="/articles/linux/problem.html#timeshift-%E5%BC%95%E5%8F%91%E7%9A%84%E8%A1%80%E6%A1%88">timeshift 引发的血案</a></li><li>可以用 <code>sudo sed -i -E &#39;s/(subvolid=[0-9]+,)|(,subvolid=[0-9]+)//g&#39; /etc/fstab</code> 命令行删除。</li></ul></li><li>挂载 zram：只需在 <code>zram-generator.conf</code> 中新建一个 zram device，然后写 <code>mount-point = /tmp</code> 即可。</li></ul></li><li><s><a href="https://wiki.archlinuxcn.org/wiki/Wayland#Electron" target="_blank" rel="noopener noreferrer">wayland 的 electron 支持</a>（据说 wayland 对 electron 不太友好）</s><ul><li><blockquote><p>无所谓，现在是 X11 人</p></blockquote></li></ul></li><li><a href="https://wiki.archlinuxcn.org/wiki/%E5%90%AF%E5%8A%A8%E6%97%B6%E6%89%93%E5%BC%80%E6%95%B0%E5%AD%97%E9%94%81%E5%AE%9A%E9%94%AE#SDDM" target="_blank" rel="noopener noreferrer">激活启动时 numlock</a></li><li>设置 pacman： <ul><li>修改 <code>/etc/pacman.d/mirrorlist</code>，添加镜像</li><li>添加 archlinuxcn：修改 <code>/etc/pacman.conf</code>，添加两行（<a href="https://www.archlinuxcn.org/archlinux-cn-repo-and-mirror/" target="_blank" rel="noopener noreferrer">ref</a>）：<div class="language-toml line-numbers-mode" data-highlighter="shiki" data-ext="toml" data-title="toml" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">archlinuxcn</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">Server</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> = h</span><span style="--shiki-light:#B31D28;--shiki-dark:#FFFFFF;--shiki-light-font-style:italic;--shiki-dark-font-style:inherit;">ttps://repo.archlinuxcn.org/$arch</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li>基础与添加 keyring：<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -Sy</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> archlinux-keyring</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> archlinuxcn-keyring</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>将某些不常用包和自更新包加入 IgnorePkg，例如 <em>chromium</em> &amp; xmake | <a href="https://www.makeuseof.com/prevent-packages-from-getting-updated-arch-linux/" target="_blank" rel="noopener noreferrer">ref</a></li><li>更改缓存至 ramdisk (<code>CacheDir</code>)</li></ul></li><li>更改 AUR Helper 缓存（参考<a href="https://wiki.archlinuxcn.org/wiki/Makepkg#%E4%BD%BF%E7%94%A8%E5%86%85%E5%AD%98%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E7%BC%96%E8%AF%91" target="_blank" rel="noopener noreferrer">wiki</a> 注意事项）： <ul><li>yay 更改缓存至 tmpfs: <code>yay --builddir /tmp/yay --save</code></li><li><em>很遗憾，我仍未找到 paru 永久设置 clonedir 的方法。</em> <span class="heimu" title="你知道的太多了">使用 alias 会带来另外的问题 </span> 但是！我们可以将 paru 的 <code>clonedir</code> 也 bind mount 同一个 tmpfs，这样就能够解决问题了。 <ul><li>然而这里还会出现权限问题，无法 (?) 解决，因此我 <a href="https://github.com/lxl66566/dotfile/blob/3c97b7cbad449d4a70100e132b775365951cf250/etc/fstab#L15" target="_blank" rel="noopener noreferrer">mount 到了另一个新的 tmpfs</a>。（不 bind 了）</li></ul></li><li><a href="https://wiki.archlinux.org/title/makepkg#Building_from_files_in_memory" target="_blank" rel="noopener noreferrer">更改 makepkg 编译位置至 tmpfs</a></li></ul></li><li>设置 grub（内核参数）<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/default/grub</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># after edit</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> grub-mkconfig</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /boot/grub/grub.cfg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>改等待时间</li><li><a href="https://wiki.archlinuxcn.org/wiki/GRUB/%E6%8A%80%E5%B7%A7%E5%92%8C%E7%AA%8D%E9%97%A8#%E5%A4%9A%E4%B8%AA%E5%90%AF%E5%8A%A8%E6%9D%A1%E7%9B%AE" target="_blank" rel="noopener noreferrer">多内核的设置</a></li></ul></li><li>修改 faillock attempt times<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># sudo -e /etc/security/faillock.conf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">deny</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 10</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><a href="https://wiki.archlinux.org/title/Xsettingsd" target="_blank" rel="noopener noreferrer">安装 <code>xsettingsd</code></a> 并简单配置</li><li>sysctl 相关。 <ul><li><a href="https://wiki.archlinux.org/title/sysctl#Enable_TCP_Fast_Open" target="_blank" rel="noopener noreferrer">Tcp Fast Open</a></li><li><a href="https://wiki.archlinux.org/title/sysctl#Enable_BBR" target="_blank" rel="noopener noreferrer">bbr</a></li><li><a href="https://wiki.archlinuxcn.org/wiki/Sysctl#%E5%A2%9E%E5%8A%A0%E6%8E%A5%E6%94%B6%E9%98%9F%E5%88%97%E7%9A%84%E5%A4%A7%E5%B0%8F" target="_blank" rel="noopener noreferrer">接收队列</a></li></ul></li><li>system.conf <ul><li><a href="https://unix.stackexchange.com/a/297318" target="_blank" rel="noopener noreferrer">调整 DefaultTimeoutStopSec</a>，使关机时不会被某些应用阻断长达 90s</li></ul></li><li>sysrq 相关。 <ul><li><a href="https://wiki.archlinuxcn.org/wiki/%E5%BF%AB%E6%8D%B7%E9%94%AE#%E5%86%85%E6%A0%B8" target="_blank" rel="noopener noreferrer">开启 + 提早开启 sysrq</a></li><li><a href="https://www.kernel.org/doc/html/v5.17/translations/zh_CN/admin-guide/sysrq.html" target="_blank" rel="noopener noreferrer">开启 sysrq 全部功能</a></li></ul></li></ol><h3 id="输入法" tabindex="-1"><a class="header-anchor" href="#输入法"><span>输入法</span></a></h3><p>我使用 fcitx5，输入要求为 <em>英语，双拼，日语</em>。可以在遇到的问题里找到一些输入法的设置。</p><ol><li>双拼关闭快速输入，默认为<code>；</code>。</li><li>中文 <em>自定义词组</em>。 <ul><li><code>w</code> -&gt; <code>我</code></li><li><code>l</code> -&gt; <code>了</code></li></ul></li><li><a href="https://wiki.archlinuxcn.org/wiki/Fcitx5#%E8%AF%8D%E5%BA%93" target="_blank" rel="noopener noreferrer">添加自定义词库</a></li></ol><h3 id="代理" tabindex="-1"><a class="header-anchor" href="#代理"><span>代理</span></a></h3><p>目前我使用 <a class="route-link" href="/articles/proxy/proxy_software.html#daed">daed</a> / <a class="route-link" href="/articles/proxy/proxy_software.html#dae">dae</a> 作为 linux 下的代理软件。</p><h4 id="使用-windows-代理" tabindex="-1"><a class="header-anchor" href="#使用-windows-代理"><span>使用 windows 代理</span></a></h4><p>archwsl 可以直接使用 windows 的代理。抄<a href="https://github.com/microsoft/WSL/issues/10753#issuecomment-1814839310" target="_blank" rel="noopener noreferrer">这里</a>的 <code>.wslconfig</code> 即可。</p><details class="hint-container details"><summary>旧版解法，已废弃</summary><div class="vp-code-tabs"><div class="vp-code-tabs-nav" role="tablist"><button type="button" class="vp-code-tab-nav active" role="tab" aria-controls="codetab-474-0" aria-selected="true">bash</button><button type="button" class="vp-code-tab-nav" role="tab" aria-controls="codetab-474-1" aria-selected="false">fish</button></div><!--[--><div class="vp-code-tab active" id="codetab-474-0" role="tabpanel" aria-expanded="true"><div class="vp-code-tab-title">bash</div><!--[--><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">your_port</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">****</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">host_ip</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/resolv.conf</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;nameserver&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cut</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> ALL_PROXY</span><span style="--shiki-light:#D73A49;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;http://</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$host_ip</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$your_port</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-code-tab" id="codetab-474-1" role="tabpanel" aria-expanded="false"><div class="vp-code-tab-title">fish</div><!--[--><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> host_ip</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /etc/resolv.conf</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot;nameserver&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#ABB2BF;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">cut</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> &quot; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">set</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -gx</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> ALL_PROXY=&quot;http://</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;">$host_ip</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">:&lt;your_port&gt;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;">  # fill your port</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p>后来写了 <a href="https://github.com/lxl66566/config/blob/archwsl/.config/fish/functions/proxy_con.fish" target="_blank" rel="noopener noreferrer">fish 脚本</a>，自用方便。</p></details><p>代理软件需要开启局域网连接。测试时不要使用 <code>ping</code> 指令（其不走代理），用 <code>curl</code>。</p><h3 id="文件系统设置" tabindex="-1"><a class="header-anchor" href="#文件系统设置"><span>文件系统设置</span></a></h3><h4 id="创建子卷至现有目录" tabindex="-1"><a class="header-anchor" href="#创建子卷至现有目录"><span>创建子卷至现有目录</span></a></h4><p>如果按照上文推荐教程安装，那么默认只会创建两个 btrfs 子卷（<code>@</code>, <code>@home</code>）。但是 btrfs 的最佳实践其实是将易变化文件（日志，缓存，数据库，容器）全部放到单独子卷里（排出根子卷），以避免打快照时将其全部加入，增大空间消耗。</p><p>例如，<code>/var/cache</code>, <code>/var/tmp</code>, <code>/var/log</code>, <code>~/.cache</code> 等位置都应该建立单独子卷。</p><p>如果在某位置新建子卷，该位置存在的文件将被覆盖。那么在需要保存文件前提下，如何新建子卷呢？答案是手动处理。(<a href="https://dev.to/klo2k/convert-directory-into-btrfs-subvolume-p98" target="_blank" rel="noopener noreferrer">src</a>)</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-504-0" aria-selected="true">fish</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-504-1" aria-selected="false">bash</button></div><!--[--><div class="vp-tab active" id="tab-504-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">fish</div><!--[--><p>可能要注意一下，路径不能带空格。</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;"> make_new_subvolume</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#56B6C2;">  set</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $argv</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> mv</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $dir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{,.bak}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> btrfs</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> subvolume</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $dir</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --archive</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --one-file-system</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --reflink=always</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $dir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">{.bak/</span><span style="--shiki-light:#005CC5;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">,}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">  sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -r</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> --one-file-system</span><span style="--shiki-light:#24292E;--shiki-dark:#E06C75;"> $dir</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&#39;.bak&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C678DD;">end</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#7F848E;--shiki-light-font-style:inherit;--shiki-dark-font-style:italic;"># Usage</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">make_new_subvolume</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> /var/log</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-504-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">bash</div><!--[--><p>参考 src。</p><!--]--></div><!--]--></div><h3 id="kde-及其配套设施" tabindex="-1"><a class="header-anchor" href="#kde-及其配套设施"><span>kde 及其配套设施</span></a></h3><p>我使用 kde 作为我的桌面（kde 爆杀 gnome!）。</p><p>我安装的 kde 系列软件详见<a class="route-link" href="/articles/linux/package.html#kde-apps">包管理与使用推荐</a>。</p><ol><li>enable flameshot：flameshot 默认无法使用 print 快捷键截图。需要在 <em>系统设置 - 添加快捷键 - 火焰截图</em>，然后手动设置快捷键。</li><li><em>输入设备</em>，将键盘的按键延迟改短。</li><li><em>外观</em>，黑色主题</li><li><em>开关机 - 桌面会话</em>，选择启动为空会话</li><li><em>快捷键</em>，添加应用程序 <em>konsole</em>，设置唤醒快捷键</li><li>关闭通知声音</li><li>输入法，语言设置，缩放率等基础的就不要我讲了。kde(wayland?) 对分数缩放做的不算太差，只是有的图标有点糊而已。</li><li>自定义状态栏。我真的爱死状态栏显示内存，磁盘 IO，CPU 占用的小组件了！<span class="heimu" title="你知道的太多了">CPU 占用其实不需要看，<s>因为可以通过风扇声判断</s></span> 还有时间格式，无用图标的自定义。</li><li><em>工作区行为 - 锁屏</em>，改锁屏时间。</li><li><a href="https://wiki.archlinuxcn.org/wiki/%E5%90%AF%E5%8A%A8%E6%97%B6%E6%89%93%E5%BC%80%E6%95%B0%E5%AD%97%E9%94%81%E5%AE%9A%E9%94%AE#KDE_Plasma_%E7%94%A8%E6%88%B7" target="_blank" rel="noopener noreferrer">设置 numlock 行为</a></li><li><em>窗口管理 - 窗口行为</em> 设置 <em>焦点跟随鼠标</em></li><li>配置窗口管理器，在窗口装饰中选择主题，调出 <code>置顶</code> 按钮。</li><li><a href="https://wiki.archlinuxcn.org/wiki/%E8%93%9D%E7%89%99" target="_blank" rel="noopener noreferrer">配置蓝牙</a>，安装 <code>bluedevil</code></li><li>关闭文件索引（臭名昭著的 baloo）：<code>balooctl disable</code>。其不仅可能导致崩溃(<a href="https://zhuanlan.zhihu.com/p/493375508" target="_blank" rel="noopener noreferrer">ref</a>)，还可能造成性能损失。</li><li>更改动画速度，改得更快一点。</li><li>设置 krunner 让其启动更快。<a href="https://bbs.archlinux.org/viewtopic.php?id=279792" target="_blank" rel="noopener noreferrer">ref</a></li></ol><h2 id="快照" tabindex="-1"><a class="header-anchor" href="#快照"><span>快照</span></a></h2><p>快照本质上就是一个 cp 而已，只不过在 btrfs 上吃了 CoW 的福利，空间占用很小罢了。</p><p>因为<a class="route-link" href="/articles/linux/problem.html#timeshift-%E5%BC%95%E5%8F%91%E7%9A%84%E8%A1%80%E6%A1%88">被 timeshift 坑过</a>，因此换用 snapper + btrfs-assistant。</p><blockquote><p>当然还有 <a href="https://github.com/digint/btrbk" target="_blank" rel="noopener noreferrer">btrbk</a> 可以选择，不过其主业 (backup tool) 并非快照，因此没有尝试。</p></blockquote><p>快照一般不备份 <code>/boot</code>，因此若回滚了旧的内核，而 boot 仍启动新的内核，则无法正常启动。<a href="https://wiki.archlinux.org/title/System_backup#Snapshots_and_/boot_partition" target="_blank" rel="noopener noreferrer">wiki 里有解法</a>，可以在更新内核时备份 <code>/boot</code> 以便回滚时能够手动替换 <code>/boot</code>。</p><h3 id="snapper" tabindex="-1"><a class="header-anchor" href="#snapper"><span>snapper</span></a></h3><p><code>btrfs-assistant</code> 为 snapper 提供了 GUI 界面，建议安装。</p><p><code>snap-pac</code> 会在<strong>每次 pacman 安装 &amp; 删除时</strong>打一次快照（<em>before and after pacman transactions</em>），这样可能会<a href="https://luoxu.archlinuxcn.org/#g=1031857103&amp;q=snap-pac" target="_blank" rel="noopener noreferrer">比较占空间</a>。我对快照没有那么高要求，因此我不用。</p><h3 id="timeshift" tabindex="-1"><a class="header-anchor" href="#timeshift"><span>timeshift</span></a></h3><p>timeshift 要求子卷名字必须以 <code>@</code> 开头。</p><p>timeshift 的 cron 定时备份默认是残废的。</p><p>甚至连卸载 timeshift 都是一个<a class="route-link" href="/articles/linux/problem.html#timeshift-%E5%88%A0%E9%99%A4%E5%BF%AB%E7%85%A7">大坑</a>。</p><h2 id="驱动" tabindex="-1"><a class="header-anchor" href="#驱动"><span>驱动</span></a></h2><h3 id="显卡驱动" tabindex="-1"><a class="header-anchor" href="#显卡驱动"><span>显卡驱动</span></a></h3><p>安装初期只看了一点<a href="https://arch.icekylin.online/guide/rookie/graphic-driver.html" target="_blank" rel="noopener noreferrer">第三方教程</a>。后面发现也要看 <a href="https://wiki.archlinux.org/title/NVIDIA" target="_blank" rel="noopener noreferrer">wiki</a>。</p><p>GPU：NVIDIA RTX 3050 Laptop + Intel 核显，装驱动<a href="#archlinux">抄教程</a>即可（但是不要抄后面的 <em>双显卡</em>）。检测驱动是否成功安装，可以执行 <code>nvidia-smi</code>。</p><p>以下设置可能并没有什么卵用，但是写在这里记录以下我的摸索过程。</p><ol><li><strong>不要安装</strong> <code>xf86-video-intel</code>，DRI 3 直接炸，DRI 2 在 election 下会花屏。</li><li><a href="https://wiki.archlinuxcn.org/wiki/NVIDIA#DRM_%E5%86%85%E6%A0%B8%E7%BA%A7%E6%98%BE%E7%A4%BA%E6%A8%A1%E5%BC%8F%E8%AE%BE%E7%BD%AE" target="_blank" rel="noopener noreferrer">DRM 内核级显示模式设置</a></li></ol><h4 id="双显卡" tabindex="-1"><a class="header-anchor" href="#双显卡"><span>双显卡</span></a></h4><p>关于双显卡，混合方案用 <em>prime</em>，不要用 <em>optimus-manager</em>（具体去落絮搜）。想要用 N 卡运行的软件需要 <code>prime-run</code>，实测是需要的。至于怎么测，打开 <code>nvtop</code> 然后开游戏，看占用。</p><p>目前我还没找到能够硬件加速 firefox 的方法。<code>prime-run</code> 测的结果是不行。</p><ol><li>设置<a href="https://wiki.archlinuxcn.org/wiki/PRIME#NVIDIA" target="_blank" rel="noopener noreferrer">在不使用的时候完全关闭 GPU</a>。</li></ol><h3 id="音频驱动" tabindex="-1"><a class="header-anchor" href="#音频驱动"><span>音频驱动</span></a></h3><p>默认是 <code>pulseaudio</code>，我尝试更换为 <code>pipewire</code>。</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> lib32-libpipewire</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> libpipewire</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pipewire-alsa</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pipewire-pulse</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pipewire-audio</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pipewire-jack</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> wireplumber</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="更换内核" tabindex="-1"><a class="header-anchor" href="#更换内核"><span>更换内核</span></a></h2><p>更换内核的目的一般是需要一些特性，例如 linux-lily 的 tty 中文字符支持。我目前使用 <code>linux-lily</code>，因为其中文支持、waydroid 支持和较低的更新频率。<span title="你知道的太多了" data-v-45b2e48c><!--[-->我曾今用过 <code>linux</code>, lts, zen 和 lily，只有 lily 的更新频率低。那么为什么要更新频率低的呢，因为天天下载还要编译模块烦死了！<!--]--></span></p><p>linux 下内核基本无需手动编译，毕竟有 PKGBUILD 脚本，甚至好多内核有已编译版本，下载就可用。</p><div class="vp-tabs"><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-705-0" aria-selected="true">lily</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-705-1" aria-selected="false">zen</button></div><!--[--><div class="vp-tab active" id="tab-705-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">lily</div><!--[--><p><code>linux-lily</code> 需要确保添加了 <span class="vp-badge info" style="">archlinuxcn</span> 源。否则可能要从 aur 编译。</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> linux-lily</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> linux-lily-headers</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!--]--></div><div class="vp-tab" id="tab-705-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">zen</div><!--[--><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> linux-zen</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> linux-zen-headers</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><!--]--></div><!--]--></div><p><strong>下载完内核后记得 <code>sudo grub-mkconfig -o /boot/grub/grub.cfg</code> 生成启动选项</strong>。</p><p>至于 initramfs 和 dkms 模块都会通过 pacman hook 自动搞定，不需要人为介入。</p><p>更换为 <code>linux</code> 以外的内核还请注意：</p><ol><li>参考<a href="#%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE">系统设置</a> <code>8.</code> 的 grub 设置。</li><li>需要更换 NVIDIA 驱动至 dkms（如果有的话）：<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#D19A66;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nvidia-dkms</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h2 id="混成器" tabindex="-1"><a class="header-anchor" href="#混成器"><span>混成器</span></a></h2><p>我目前正在使用 X11。具体原因请移步 <a class="route-link" href="/articles/linux/basic.html#%E6%B7%B7%E6%88%90%E5%99%A8">basic</a>。</p></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><!----></div><!----></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/articles/linux/basic.html" aria-label="基础"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><span class="font-icon icon fas fa-microchip" style=""></span>基础</div></a><a class="route-link auto-link next" href="/articles/linux/nix.html" aria-label="安装与配置（NixOS 篇）"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">安装与配置（NixOS 篇）<span class="font-icon icon fas fa-regular fa-snowflake" style=""></span></div></a></nav><div id="vp-comment" class="giscus-wrapper input-top" style="display:block;"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><circle cx="28" cy="75" r="11" fill="currentColor"><animate attributeName="fill-opacity" begin="0s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></circle><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 47a28 28 0 0 1 28 28"><animate attributeName="stroke-opacity" begin="0.1s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path><path fill="none" stroke="#88baf0" stroke-width="10" d="M28 25a50 50 0 0 1 50 50"><animate attributeName="stroke-opacity" begin="0.2s" dur="1s" keyTimes="0;0.2;1" repeatCount="indefinite" values="0;1;1"></animate></path></svg></div><!----><!--]--></main><!--]--><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-lv7BXT0A.js" defer></script>
  </body>
</html>
