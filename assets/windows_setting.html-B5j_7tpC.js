import{_ as p,e as k,f as a,g as s,i as n,h as e,j as l,r as h,o as g}from"./app-DENIl04k.js";const m={},u={class:"hint-container details"};function A(y,i){const t=h("RouteLink"),d=h("Tabs");return g(),k("div",null,[i[80]||(i[80]=a('<h1 id="设置-windows" tabindex="-1"><a class="header-anchor" href="#设置-windows"><span>设置 Windows</span></a></h1><p>好的设置能够在未来降低血压，并大幅提高工作效率。</p><h2 id="对-win11-的设置" tabindex="-1"><a class="header-anchor" href="#对-win11-的设置"><span>对 win11 的设置</span></a></h2><details class="hint-container details"><summary>前言</summary><p>我最初入坑 win11 是由于入手了 12500H，有大小核，即使很不想使用 win11，也只能硬上了。</p><p>后来用了两年，因为毛病越积越多，20241216 我又重装了一次 win11。</p><p>202503 购买台式机，又装一次。</p><p>总之我也在使用 windows 的过程中持续记录心得，经验丰富。</p></details><h3 id="小工具" tabindex="-1"><a class="header-anchor" href="#小工具"><span>小工具</span></a></h3><ul><li>在 b 站看到一个 <a href="https://wwkh.lanzout.com/iMb0v2ladkhe" target="_blank" rel="noopener noreferrer">Windows11 轻松设置工具</a> (<a href="https://www.bilibili.com/video/av113807439503289/" target="_blank" rel="noopener noreferrer">src</a>)，和下一部分内容面我的设置是重合的，用这个工具可以进行快速便捷的设置，非常好用。</li></ul><h3 id="安装时" tabindex="-1"><a class="header-anchor" href="#安装时"><span>安装时</span></a></h3><ul><li>如果你的 windows 是从 win11 官方 ISO 安装的，那么初始化时登录微软帐号的那一步，<strong>千万不要登录微软帐号</strong>。<a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E7%99%BB%E5%BD%95%E5%BE%AE%E8%BD%AF%E5%B8%90%E5%8F%B7%E9%85%BF%E6%88%90%E7%9A%84%E6%82%B2%E5%89%A7">理由</a><ul><li>最好直接断网安装：在强制需要联网的那一步按 <code>Shift + F10</code>，执行 <code>oobe\\bypassnro</code>，重启后就会显示 <em>没有 lnternet 连接</em> 选项。 <ul><li>2025 微软把这指令禁用了，所以建议装机之前先把 <code>C:\\Windows\\System32\\oobe\\BypassNRO.cmd</code> 拷到 U 盘里，装完机就可以直接执行脚本了。（本质上是修改一个注册表）</li></ul></li></ul></li></ul><h3 id="安装后-关键步骤" tabindex="-1"><a class="header-anchor" href="#安装后-关键步骤"><span>安装后（关键步骤）</span></a></h3>',9)),s("ul",null,[i[26]||(i[26]=s("li",null,[e("进行 windows 更新。（需要看情况，关注一下最近的 windows 更新补丁有没有出过什么大问题） "),s("ul",null,[s("li",null,"本次更新将会成为我的 Windows 系统的最后一次更新。")])],-1)),s("li",null,[i[2]||(i[2]=e("还原右键菜单并设置：右击 ")),i[3]||(i[3]=s("em",null,"开始键",-1)),i[4]||(i[4]=e("，打开 ")),i[5]||(i[5]=s("em",null,"Windows 终端（管理员）",-1)),i[6]||(i[6]=e(" ，执行 ")),i[7]||(i[7]=s("code",null,'reg add "HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\\InprocServer32" /f /ve',-1)),i[8]||(i[8]=e(" （或直接使用")),n(t,{to:"/farraginous/recommend_packages.html#winaero-tweaker"},{default:l(()=>i[0]||(i[0]=[e("Winaero Tweaker")])),_:1}),i[9]||(i[9]=e(" 进行设置），再用 ")),n(t,{to:"/farraginous/recommend_packages.html#ContextMenuManager"},{default:l(()=>i[1]||(i[1]=[e("ContextMenuManager")])),_:1}),i[10]||(i[10]=e(" 调整。"))]),i[27]||(i[27]=a(`<li>关闭 Windows 安全中心(<a href="https://zhuanlan.zhihu.com/p/611313419" target="_blank" rel="noopener noreferrer">为什么我们需要关闭它？</a>)。下面给出了几种方法，可以任选其一。 <ol><li>（推荐）使用 <a href="#%E5%B0%8F%E5%B7%A5%E5%85%B7">Windows11 轻松设置工具</a>。</li><li><a href="https://github.com/ionuttbara/windows-defender-remover" target="_blank" rel="noopener noreferrer">Defender Remover</a>。该工具之前还不太好用，移除后还有设置项残留，并且无法再次进入安全中心调整选项。所以需要移除前去手动关闭安全中心里看得见的所有设置项。不过 2025 年后也可以尝试。</li><li>手动(<a href="https://zhuanlan.zhihu.com/p/494923217" target="_blank" rel="noopener noreferrer">src</a>)，但实测并不能完全关闭 <ul><li><em>Windows 安全中心-病毒和威胁防护-管理设置</em> ，关闭所有开关</li><li>使用组策略编辑器禁用 Windows Defender</li><li><code>win + r</code>运行<code>gpedit.msc</code>，<em>计算机配置 - 管理模板-Windows 组件 - 关闭 Microsoft Defender 防病毒</em> ，选择已启用</li><li>由于我的电脑是家庭版升专业版，没有 <code>gpedit.msc</code> 文件，因此需先添加组策略编辑器。在记事本输入以下代码并保存为 <code>.bat</code> 文件，管理员运行。<div class="language-batch line-numbers-mode" data-highlighter="shiki" data-ext="batch" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">pushd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#50A14F;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">%</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">~dp0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /b </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">%systemroot%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\\Windows\\servicing\\Packages\\Microsoft-Windows-GroupPolicy-ClientExtensions-Package~3*.mum &gt;gp.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /b </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">%systemroot%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\\servicing\\Packages\\Microsoft-Windows-GroupPolicy-ClientTools-Package~3*.mum &gt;&gt;gp.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /f </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">%%i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (&#39;findstr /i . gp.txt 2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">^</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">nul</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&#39;) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> dism /online /norestart /add-package:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">systemroot</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\\servicing\\Packages\\</span><span style="--shiki-light:#50A14F;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">%%</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">pause</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>使用<a href="https://www.sordum.org/9480/defender-control-v2-1/" target="_blank" rel="noopener noreferrer">Defender Control</a>彻底关闭安全中心。</li></ul></li></ol></li><li>关闭安全检查与防火墙：<em>控制面板 &gt; 系统和安全 &gt; 安全和维护</em></li><li>禁用 <em>用户账户控制 UAC</em><sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>，让你打开应用时不再受到烦人的弹窗困扰。</li><li>关闭 Windows Defender SmartScreen：Windows Defender SmartScreen 是 edge 下载 exe 提示有风险的元凶。 <ul><li>组策略编辑器（<code>gpedit.msc</code>）中，<em>管理模板 &gt; Windows 组件 &gt; Windows Defender SmartScreen &gt; Microsoft Edge &gt; 配置 Windows Defender SmartScreen</em> 里禁用两个选项。</li></ul></li><li>升级专业版：使用<a href="https://github.com/zbezj/HEU_KMS_Activator" target="_blank" rel="noopener noreferrer">HEU_KMS_Activator</a>升级 win11 专业版并激活。 <ul><li>若对开源有需求，也可使用 <a href="https://github.com/massgravel/Microsoft-Activation-Scripts" target="_blank" rel="noopener noreferrer">Microsoft-Activation-Scripts</a>激活。</li></ul></li>`,5)),s("li",null,[n(t,{to:"/articles/ramdisk.html#imdisk-toolkit"},{default:l(()=>i[11]||(i[11]=[e("安装 Imdisk")])),_:1}),i[13]||(i[13]=e(" 并")),n(t,{to:"/articles/ramdisk.html#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97"},{default:l(()=>i[12]||(i[12]=[e("配置")])),_:1}),i[14]||(i[14]=e("。"))]),s("li",null,[i[19]||(i[19]=s("strong",null,"关闭快速启动",-1)),i[20]||(i[20]=e("。运行 ")),i[21]||(i[21]=s("code",null,"control",-1)),i[22]||(i[22]=e("，在 ")),i[23]||(i[23]=s("em",null,"系统和安全 - 电源选项 - 选择电源按钮的功能",-1)),i[24]||(i[24]=e(" 里设置。 ")),s("ol",null,[s("li",null,[i[16]||(i[16]=e("避免关机时自动保存 ")),n(t,{to:"/articles/ramdisk.html"},{default:l(()=>i[15]||(i[15]=[e("RAM Disk")])),_:1}),i[17]||(i[17]=e(" 文件到固态盘；"))]),i[18]||(i[18]=a('<li>Windows 更新 &quot;更新并关闭&quot; 选项可能无法正常关闭电脑，变为 <em>更新并重启</em>。<a href="https://t.me/withabsolutex/1193" target="_blank" rel="noopener noreferrer">ref</a></li><li>事实上快速启动的关机<a href="https://learn.microsoft.com/en-us/troubleshoot/windows-client/deployment/fast-startup-causes-system-hibernation-shutdown-fail#more-information" target="_blank" rel="noopener noreferrer">其实是 hibernate</a>，是固态写入量的<strong>最大贡献者</strong><sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup>。</li><li>热知识：为什么安装 linux 双系统时要关闭快速启动？因为挂载在 hibernate 状态的硬盘几乎必炸（double mount）。</li>',3))])]),i[28]||(i[28]=a(`<li>开启透明压缩。LZW 算法，效果只能说聊胜于无，非系统盘 208G 压到 183G。</li><li>安装 scoop 与 winget，并通过其安装一些常用软件。<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># scoop</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Set-ExecutionPolicy</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ExecutionPolicy</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RemoteSigned</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Scope</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CurrentUser</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke-RestMethod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Uri</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://get.scoop.sh</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Invoke-Expression</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># winget</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Add-AppxPackage</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -RegisterByFamilyName</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -MainPackage</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Microsoft.DesktopAppInstaller_8wekyb3d8bbwe</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>winget 会自带一个 python，记得用 everything 找出来，从 PATH 里把那个 path 删掉。</li><li>关键软件如下：<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">scoop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uutils-coreutils</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">            # 让我可以在 windows 上用 linux busybox 指令</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li>还需要下载其他的关键软件。 <ul><li>在 extras bucket 里安装所有 C++ 运行库：<code>scoop install vcredist2005 vcredist2008 vcredist2010 vcredist2012 vcredist2013 vcredist2022</code></li><li><a href="https://www.puresys.net/5055.html" target="_blank" rel="noopener noreferrer">DirectX 修复工具</a>，图吧工具箱里也有。</li></ul></li>`,3)),s("li",null,[n(t,{to:"/articles/linux/install_and_config.html#%E5%AE%89%E8%A3%85"},{default:l(()=>i[25]||(i[25]=[e("安装 ArchWSL")])),_:1})]),i[29]||(i[29]=a('<li>解决<a href="#%E7%AB%AF%E5%8F%A3%E9%9A%8F%E6%9C%BA%E5%8D%A0%E7%94%A8">端口随机占用</a></li><li><a href="https://answers.microsoft.com/zh-hans/windows/forum/all/%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3windows11/c8ca1777-f33a-487a-bb36-c8ac920fbd6c" target="_blank" rel="noopener noreferrer">组织管理滚</a>。</li><li>关闭自动更新。 <ol><li><a href="https://answers.microsoft.com/zh-hans/windows/forum/all/%E8%A6%81%E5%BD%BB%E5%BA%95%E5%85%B3%E9%97%ADwin11/3c448d50-2e7f-42df-9fdb-f7f9aa9820ec" target="_blank" rel="noopener noreferrer">组策略编辑器</a>内关闭</li><li>服务：<code>services.msc</code> 里禁用 <code>Windows Update</code> 服务</li><li>任务计划程序关闭：<em>Microsoft &gt; Windows &gt; WindowsUpdate &gt; 禁用 Scheduled Start</em></li></ol><ul><li>既然无需经常更新，那就<a href="https://blog.51cto.com/u_13464709/2057007" target="_blank" rel="noopener noreferrer">关闭传递优化</a>，并且用 <em>磁盘清理</em> 清一下这位占用的空间。</li></ul></li><li>开启长路径：组策略编辑器（运行 <code>gpedit.msc</code>），<em>计算机配置 &gt; 管理模板 &gt; 系统 &gt; 文件系统 &gt; 启用 Win32 长路径</em> 选择已启用</li>',4))]),i[81]||(i[81]=s("h3",{id:"安装后-推荐步骤",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#安装后-推荐步骤"},[s("span",null,"安装后（推荐步骤）")])],-1)),s("ul",null,[i[39]||(i[39]=a(`<li>磁盘设置： <ul><li>如果硬盘有分区，移动 <em>文档、图片、下载</em> 等文件夹到 D 盘（新分区），以避免过多占用 C 盘空间。</li><li>如果有移动硬盘，请在 <em>磁盘管理</em> 中右键分区，手动指定驱动器号。固定驱动器号可以保证各个脚本运行正常。</li><li>NTFS 优化(<a href="https://t.me/kenvixmeow/8" target="_blank" rel="noopener noreferrer">ref</a>)：先导入注册表项，再用管理员终端执行命令。<div class="language-reg line-numbers-mode" data-highlighter="shiki" data-ext="reg" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Windows Registry Editor Version 5.00</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\FileSystem]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">NtfsDisable8dot3NameCreation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;=</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">dword</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00000001</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">NtfsMftZoneReservation</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;=</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">dword</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00000003</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Memory Management]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">LargeSystemCache</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;=</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">dword</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00000001</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">fsutil</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> behavior</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disablelastaccess</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">set-mmagent</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -MaxOperationAPIFiles</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8192</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li>禁用休眠。休眠 == hibernate，原理是将内存写入磁盘。其会在 C 盘创建一块用于休眠的大块文件，并且每次休眠都会向硬盘中写入大量数据。我不喜欢这样，为什么不选择关机呢？</li><li>网络设置： <ul><li>在 <em>高级网络设置 - Internet 选项 - 高级</em> 中，打开 TLS 1.3</li><li><a href="https://stackoverflow.com/questions/60159716/how-to-enable-tcp-bbr-on-windows" target="_blank" rel="noopener noreferrer">开启 bbr 拥塞算法</a>：bbr 在弱网环境下表现异常优异，是 linux 内核的一部分。不过可能有着强网络下流量消耗增大的缺陷。</li></ul></li><li>外观设置： <ul><li>打开任务栏时间秒数显示：<em>任务栏设置 - 任务栏行为</em></li></ul></li><li>习惯设置： <ul><li>关闭所有系统提示音。</li><li>文件夹与文件改为单击。我个人不喜欢双击。 <ul><li>windows 的单击逻辑做的还是比 linux kde 好的，<em>悬浮选中</em> 是单击逻辑中的重要组成部分。</li></ul></li><li>更改触摸板功能：三指左右划调节音量。实际上并不是很好用：我音量常年 20%，触摸板调节的话很容易拉得太大。</li><li><a href="#shell-alias">shell alias</a></li><li>关闭鼠标的 “提高指针精确度”，这个实际上是根据加速度修正移动距离，对于 FPS 极为不友好。</li></ul></li><li>做减法： <ul><li>关闭搜索推荐&amp;热门新闻：关闭 <em>设置 - 隐私和安全性 - 搜索权限 - 更多设置 - 显示搜索要点</em> 。(<a href="https://www.landiannews.com/archives/95045.html" target="_blank" rel="noopener noreferrer">ref</a>，最新版 win11 可能没有此条设置)</li><li>卸载各种傻逼预装玩意。 <ol><li>卸载小组件：打开管理员终端，执行 <code>winget uninstall MicrosoftWindows.Client.WebExperience_cw5n1h2txyewy</code>。然后重启个资源管理器就行了。我是用了一段时间后才想到卸载小组件，鸡肋，不小心点到的话也烦。</li><li><a href="https://aka.ms/meeremove" target="_blank" rel="noopener noreferrer">卸载 Minecraft Education Edition</a> (<a href="https://educommunity.minecraft.net/hc/en-us/community/posts/4410545727764" target="_blank" rel="noopener noreferrer">src</a>)</li><li>卸载 Your Phone：powershell <code>Get-AppxPackage Microsoft.YourPhone -AllUsers | Remove-AppxPackage</code>，但是 <code>C:\\Program Files\\WindowsApps</code> 的 Your Phone 文件并不会删除。</li><li>卸载 PC Manager（微软电脑管家）、Microsoft Power BI，在设置 - 应用里可以直接卸载</li><li>在 <em>设置 - 可选功能</em> 里，卸载 Windows Powershell ISE，windows 这编辑器太捞了。</li></ol></li><li>禁用一些服务。 <ul><li>Windows Font Cache Service</li></ul></li><li>禁用搜索框联网搜索功能 (<a href="https://www.landiannews.com/archives/107320.html" target="_blank" rel="noopener noreferrer">src</a>)</li><li>如果你安装了 MS Office，那大概率还会被装上一个 Office PLUS，这是一个傻逼国内代理广告，会污染你的 office 菜单和右键菜单。建议用 everything 搜到 officeplus 的安装文件夹，然后点击 uninst.exe 卸载。</li><li>AMD 用户不要装 AMD Software: Adrenalin Edition。这个傻逼软件会定期弹一个 update 黑窗口然后什么也不做。</li></ul></li><li>开启 <em>运行</em> 历史记录：<em>设置 - 隐私和安全性 - 常规 - 允许 Windows 跟踪应用启动以改进“开始&quot;和搜索结果</em>。此设置项默认开启的，之前不小心被某个脚本关了。</li><li>设置 copilot：copilot 确实是个免费用的 gpt4，就是比较慢。 <ul><li>ms 在 2024.03-04 把 copilot 图标对中国用户禁了。可以重新启用：编辑 <code>C:\\Windows\\System32\\IntegratedServicesRegionPolicySet.json</code>，在最下面将 <em>Show Copilot on taskbar...</em> 项的 disabled 里把 <code>&quot;CN&quot;, </code> 删掉。需要<a href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6">获取权限</a>。</li><li>即使开着代理，用着用着也经常出现 <em>很抱歉，目前无法连接到服务。</em>。解法：在 edge 浏览器中改微软账户地区至其他地区。(<a href="https://www.bilibili.com/read/cv33602923/" target="_blank" rel="noopener noreferrer">src</a>)</li></ul></li><li>设置 Explorer： <ul><li>使用 <a href="https://github.com/lesferch/WinSetView/" target="_blank" rel="noopener noreferrer">WinSetView</a> 将 <em>音乐</em> 文件夹 view 设为小图标。否则当你打开一个装满音乐的文件夹时，Explorer 将会去读取所有文件的元数据，会导致卡顿。(<a href="https://answers.microsoft.com/en-us/windows/forum/windows_11-files/how-to-prevent-windows-explorer-from-reading/c123eab1-e5a5-4124-bf20-68f67a08e47b?messageId=b010aeba-a852-40e7-8732-8f67cb4fd1ed" target="_blank" rel="noopener noreferrer">src</a>)</li><li>安装 <a href="https://github.com/tibold/svg-explorer-extension" target="_blank" rel="noopener noreferrer">svg-explorer-extension</a> 插件，让 Explorer 可以预览 svg。</li></ul></li>`,9)),s("li",null,[i[31]||(i[31]=e("输入法：详见 ")),n(t,{to:"/articles/input_method.html"},{default:l(()=>i[30]||(i[30]=[e("输入法")])),_:1}),i[32]||(i[32]=e(" 文章。要把微软拼音禁用，需要在 ")),i[33]||(i[33]=s("em",null,"语言和区域",-1)),i[34]||(i[34]=e(" 的语言中进入 ")),i[35]||(i[35]=s("em",null,"简体中文",-1)),i[36]||(i[36]=e(" 的 ")),i[37]||(i[37]=s("em",null,"语言选项",-1)),i[38]||(i[38]=e("，在里面删除键盘。"))]),i[40]||(i[40]=s("li",null,[e("小键盘：如果你的 windows 启动不会自动打开 numslock，需要在注册表中找到 "),s("code",null,"计算机\\HKEY_USERS\\.DEFAULT\\Control Panel\\Keyboard"),e("，将 "),s("code",null,"InitialKeyboardIndicators"),e(" 改为 2。")],-1))]),i[82]||(i[82]=s("h3",{id:"旧设置项",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#旧设置项"},[s("span",null,"旧设置项")])],-1)),s("details",u,[i[58]||(i[58]=s("summary",null,"已失效设置项",-1)),s("ul",null,[i[56]||(i[56]=a(`<li><s>开启 Hyper-V 功能 ：<em>设置 - 应用 - 可选功能 - 更多 Windows 功能</em> 打开 <em>Hyper-V</em> 选项。</s> 开启 Hyper-V 原本是启用 WSA 的前置条件，但是 WSA 似了 <ul><li>由于我找不到 Hyper-V 选项，因此采用网上教程：将以下代码保存为 <code>.bat</code> 并管理员运行即可。<div class="language-batch line-numbers-mode" data-highlighter="shiki" data-ext="batch" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">pushd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#50A14F;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">%</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">~dp0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">dir</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /b </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">%SystemRoot%</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">\\servicing\\Packages\\*Hyper-V*.mum &gt;hyper-v.txt</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> /f </span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">%%i</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (&#39;findstr /i . hyper-v.txt 2</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">^</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">nul</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&#39;) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> dism /online /norestart /add-package:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">SystemRoot</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">\\servicing\\Packages\\</span><span style="--shiki-light:#50A14F;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">%%</span><span style="--shiki-light:#383A42;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">i</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">del</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> hyper-v.txt</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Dism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li>`,1)),s("li",null,[i[55]||(i[55]=e("WSA 已经似了，微软官宣停止支持了。 ")),s("ul",null,[s("li",null,[i[42]||(i[42]=e("即使是之前我也不喜欢 WSA：WSA 兼容性还有待进步；WSA 在开机时自启，会占用一定性能 / 内存；我是双系统用户，而 Android Emulator 在 linux 上的有更好的选择（")),n(t,{to:"/articles/linux/package.html#waydroid"},{default:l(()=>i[41]||(i[41]=[e("Waydroid")])),_:1}),i[43]||(i[43]=e("）。"))]),i[53]||(i[53]=a("<li><em>设置 - 时间和语言 - 国家和地区</em> ，选择美国</li><li>打开 Microsoft Store（记得关代理），下载 Amazon Appstore。系统将自动下载安装 Windows Subsystem for Android™️。</li><li>可选项：在 <em>设置 - 应用和功能</em> 内找到 Windows Subsystem for Android™️，移动到 D 盘以节省空间。</li><li>别忘了把 <em>国家和地区</em> 改回去。</li><li>打开安装好的 Windows Subsystem for Android™️，点击左侧 Developer，打开 Developer mode.（意味着在 <code>127.0.0.1:58526</code> 默认端口开启调试）</li>",5)),s("li",null,[i[52]||(i[52]=e("在这里你可以使用两种方式安装软件： ")),s("ol",null,[i[51]||(i[51]=s("li",null,[s("a",{href:"https://github.com/alesimula/wsa_pacman",target:"_blank",rel:"noopener noreferrer"},"WSA PacMan"),e("提供了便捷的图形化界面。")],-1)),s("li",null,[i[45]||(i[45]=e("使用")),n(t,{to:"/articles/mobile/adb.html"},{default:l(()=>i[44]||(i[44]=[e("ADB")])),_:1}),i[46]||(i[46]=e("，输入 ")),i[47]||(i[47]=s("code",null,"adb connect 127.0.0.1:58526",-1)),i[48]||(i[48]=e(" 连接,")),i[49]||(i[49]=s("code",null,"adb install ...",-1)),i[50]||(i[50]=e("安装。"))])])]),i[54]||(i[54]=a(`<li>关于网络受限问题：在虚拟机的 <em>设置 - Network&amp;internet</em> 中看到网络连接受限。win11 发出弹窗警告。 解决方法（参考<a href="https://www.shenshanhongye.com/jc/2134.html" target="_blank" rel="noopener noreferrer">来源</a>）：在 adb 成功连接后，输入：<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> settings</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> put</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> captive_portal_mode</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> settings</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> put</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> captive_portal_https_url</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://www.google.cn/generate_204</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">adb</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shell</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> settings</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> put</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> global</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> captive_portal_http_url</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://www.google.cn/generate_204</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>重启 wifi 即可。</li>`,1))])]),i[57]||(i[57]=a('<li>更改任务栏样式：下载<a href="https://apps.microsoft.com/store/detail/roundedtb/9MTFTXSJ9M7F?hl=en-us&amp;gl=us" target="_blank" rel="noopener noreferrer">RoundedTB</a>，根据提示更改。 <ul><li>默认情况美观度还不错，但是在全屏窗口下反而很丑。</li></ul></li><li><s>开启全局 UTF-8：<em>设置 - 语言和区域 - 管理语言设置 - 更改系统区域设置 - beta:使用 UTF-8...</em></s> 实测会导致一些 galgame 乱码。</li><li><s>使用 <a href="https://github.com/Raphire/Win11Debloat" target="_blank" rel="noopener noreferrer">Win11Debloat</a> 移除一些自带软件与组件。</s><ul><li>这会有一些 sideeffects，例如使某些终端乱码，win + R 失去记忆，等等。必需谨慎使用，或者你知道如何恢复。</li></ul></li><li>使用<a href="https://www.oo-software.com/en/shutup10" target="_blank" rel="noopener noreferrer">O&amp;O ShutUp10++: Free antispy tool for Windows 10 and 11</a>禁用一些非必须功能。但是它的大部分设置项都是没用的，剩下的有用的 <a href="#%E5%B0%8F%E5%B7%A5%E5%85%B7">windows 11 轻松设置工具</a> 也能做。</li>',4))])]),i[83]||(i[83]=s("h2",{id:"软件",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#软件"},[s("span",null,"软件")])],-1)),s("p",null,[i[60]||(i[60]=e("关于软件推荐请前往")),n(t,{to:"/farraginous/recommend_packages.html"},{default:l(()=>i[59]||(i[59]=[e("杂项 - 软件汇总")])),_:1}),i[61]||(i[61]=e("页面。"))]),i[84]||(i[84]=s("p",null,"我的 windows 开机自启动的托盘软件有：",-1)),s("ul",null,[s("li",null,[n(t,{to:"/farraginous/recommend_packages.html#ditto"},{default:l(()=>i[62]||(i[62]=[e("Ditto")])),_:1})]),i[66]||(i[66]=s("li",null,"V2rayN",-1)),s("li",null,[n(t,{to:"/farraginous/recommend_packages.html#everything"},{default:l(()=>i[63]||(i[63]=[e("everything")])),_:1})]),s("li",null,[n(t,{to:"/farraginous/recommend_packages.html#tai"},{default:l(()=>i[64]||(i[64]=[e("Tai")])),_:1})]),s("li",null,[n(t,{to:"/farraginous/recommend_packages.html#%E6%88%AA%E5%9B%BE%E8%BD%AF%E4%BB%B6"},{default:l(()=>i[65]||(i[65]=[e("截图软件")])),_:1})])]),i[85]||(i[85]=s("p",null,"后台：",-1)),s("ul",null,[s("li",null,[n(t,{to:"/articles/ramdisk.html"},{default:l(()=>i[67]||(i[67]=[e("Imdisk")])),_:1})])]),i[86]||(i[86]=a('<p>因此耗电还是挺多的，因此我出门一般都用 linux。</p><h2 id="自启动" tabindex="-1"><a class="header-anchor" href="#自启动"><span>自启动</span></a></h2><p>有几种方法可以在 windows 上进行自启动：</p><ol><li>打开任务管理器，选择到 <code>启动</code> 进行修改。</li><li>在 <em>运行</em> 中输入 <code>shell:startup</code> 打开启动文件夹，拖入需自启动的程序快捷方式。</li><li><code>services.msc</code> 中的服务可以设为自启动。</li></ol><p>如果你习惯命令行操作，也可以使用我写的 <a href="https://github.com/lxl66566/user-startup-rs" target="_blank" rel="noopener noreferrer">user-startup-rs</a> 添加自启动命令。</p><h2 id="shell-alias" tabindex="-1"><a class="header-anchor" href="#shell-alias"><span>shell alias</span></a></h2><p><a href="https://stackoverflow.com/questions/20530996/aliases-in-windows-command-prompt" target="_blank" rel="noopener noreferrer">ref</a>。被 linux 驯化了，再回到没有 alias 的 windows 是真不习惯。</p>',7)),n(d,{id:"705",data:[{id:"更换其他 shell"},{id:"cmd"}]},{title0:l(({value:r,isActive:o})=>i[68]||(i[68]=[e("更换其他 shell")])),title1:l(({value:r,isActive:o})=>i[69]||(i[69]=[e("cmd")])),tab0:l(({value:r,isActive:o})=>i[70]||(i[70]=[s("p",null,"最简单也是更好的方法是换 shell，我用 bash 和 nushell 都挺顺手的。",-1),s("div",{class:"language-sh line-numbers-mode","data-highlighter":"shiki","data-ext":"sh",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[s("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"scoop"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," install"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," git")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"winget"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," install"),s("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," nushell")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),tab1:l(({value:r,isActive:o})=>i[71]||(i[71]=[s("p",null,[e("把这个脚本放在某个地方，然后设成打开 shell 自动执行，对 cmd 来说相当于 "),s("code",null,".bashrc"),e("。")],-1),s("div",{class:"language-bat line-numbers-mode","data-highlighter":"shiki","data-ext":"bat",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[s("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"@"),s("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"echo"),s("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}}," off")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"DOSKEY"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," ls=dir $*")]),e(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"DOSKEY"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," alias=notepad "),s("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"%USERPROFILE%"),s("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"\\alias.cmd")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("p",null,[e("如果有 alias 多行指令需求，那就得写 "),s("code",null,".cmd"),e(" 文件并写进 "),s("code",null,"PATH"),e(" 里了。")],-1)])),_:1}),i[87]||(i[87]=a('<h2 id="bios-密码重置" tabindex="-1"><a class="header-anchor" href="#bios-密码重置"><span>BIOS 密码重置</span></a></h2><blockquote><p><em>以 Predator G3-573 为例，不保证其他品牌电脑的重置方法相同</em></p></blockquote><ol><li>在 BIOS 界面中输错三次密码，出现输入恢复码的弹窗，并给出一个 Key。（我的电脑 Key 为 10 位纯数字）</li><li>进入<a href="https://1024kb.co.nz/bios/" target="_blank" rel="noopener noreferrer">此网站</a>，输入 Key，然后将计算结果输回电脑。</li><li>进入 BIOS 后，设置 supervisor password 为空。</li></ol><h2 id="权限控制" tabindex="-1"><a class="header-anchor" href="#权限控制"><span>权限控制</span></a></h2><blockquote><p>起因：MS-DOS 自带的 <code>tree</code> 命令太难用了。我想把它替换为 <a href="https://gnuwin32.sourceforge.net/packages/tree.htm" target="_blank" rel="noopener noreferrer">tree for windows</a>。</p></blockquote><p>windows 文件/文件夹除了对不同 User 的权限控制外，还有 <em>所有者</em> 这一概念。<em>所有者</em> 可以修改文件/文件夹权限。</p><p>一般来说，拥有管理员权限能干的事情已经比较多了，但是对于某些系统位置还是没辙。究其原因，有些文件的 <em>所有者</em> 是 <em>TrustedInstaller</em>，并且权限设置成了 <em>所有者</em> 拥有完全访问权限，管理员只读。因此我们在修改这些文件时需要：</p><ol><li>将所有者改为自己：<em>属性 - 安全 - 高级</em>，更改所有者，输入你的用户名然后右边点 <em>检查名称</em>，会帮你自动补全。然后一路确定。</li><li>更改权限：一般这种文件/文件夹的父文件夹也是管理员控制的。因此给管理员 <em>完全控制</em> 权限即可。在上一步的 <em>安全</em> 内点 <em>编辑</em>，给管理员勾上 <em>完全控制</em> 即可。</li></ol><h2 id="链接" tabindex="-1"><a class="header-anchor" href="#链接"><span>链接</span></a></h2>',9)),s("p",null,[i[73]||(i[73]=e("windows 下也可以")),n(t,{to:"/articles/linux/basic.html#%E9%93%BE%E6%8E%A5"},{default:l(()=>i[72]||(i[72]=[e("像 linux 一样")])),_:1}),i[74]||(i[74]=e("创建硬链接和软连接。由于盘符即分区，硬链接是无法跨盘符的，所以以后使用 windows 还是不要分多个盘符比较好。"))]),i[88]||(i[88]=a(`<p>软链接：</p><ul><li>不能使用 <em>创建快捷方式</em> 的方法。快捷方式本质上是一个 <code>.lnk</code> 文件，与真正的软链接不同。</li><li>不能在 wsl 内使用 <code>ln -s</code> 创建。这样创建的软链接不会被 windows 识别。</li></ul><p>软链接的创建方式：打开管理员终端，<code>mklink /D &lt;destination&gt; &lt;source&gt;</code>。<code>mklink</code> 默认为软链接，<code>&lt;destination&gt;</code> 与 <code>&lt;source&gt;</code> 的位置跟 <code>ln</code> 是相反的，并且必需要指定名字<sup class="footnote-ref"><a href="#footnote3">[3]</a><a class="footnote-anchor" id="footnote-ref3"></a></sup>。</p><h2 id="日版-windows-10" tabindex="-1"><a class="header-anchor" href="#日版-windows-10"><span>日版 Windows 10</span></a></h2><p>20250604 由于一些契机，装了个日版 windows 10 LTSC 2021 用，结果血压飙升。。</p><ul><li>日版系统没法访问我的中文 win11 系统的系统盘；但是我在中文系统可以访问日版系统盘。NTFS 不可能有这样的 breaking change，应该是 win11 系统盘开了透明压缩导致的，哈哈。</li><li>开机后有个傻逼 <code>AppX Deployment Service (AppXSVC)</code> 服务一直吃我的 CPU 单核，风扇狂转，重启无效，服务里没法禁用，甚至进了安全模式都没法禁用服务。最后改注册表才弄好。不给权限就是纯纯的流氓行为。<div class="language-reg line-numbers-mode" data-highlighter="shiki" data-ext="reg" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Windows Registry Editor Version 5.00</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[HKEY_LOCAL_MACHINE\\SYSTEM\\ControlSet001\\Services\\AppXSvc]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">Start</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;=</span><span style="--shiki-light:#0184BC;--shiki-dark:#ABB2BF;">dword</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00000004</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>安装时遇到登录微软帐号，我本来想用 OOBE 绕过，结果日区的反斜杠在微软默认的日语输入法下打不出来，要按住 Alt + 小键盘 <code>92</code> 才能打。实际上微软日区输入法改了很多键，标点符号跟随机排布差不多。 <ul><li>而且 OOBE 还无法绕过，根本找不到。所以只能用 <code>start ms-cxh:localonly</code> 跳。</li><li>进系统后<strong>输入法全部炸烂</strong>，反正微软日文输入法、装了中文语言和微软中文输入法都没法显示候选框；甚至我用中文系统的同一套 Rime 配置都没法正常使用，烂完了。</li></ul></li><li>scoop bucket 不能正常使用，extras 不被认为是一个 git 仓库。。。</li><li>还有一些我个人原因，比如用惯了 win11 已经不会用 win10 了，非常硌手。</li></ul><h2 id="遇到的问题" tabindex="-1"><a class="header-anchor" href="#遇到的问题"><span>遇到的问题</span></a></h2><h3 id="初始化登录微软帐号酿成的悲剧" tabindex="-1"><a class="header-anchor" href="#初始化登录微软帐号酿成的悲剧"><span>初始化登录微软帐号酿成的悲剧</span></a></h3><p>20241215，我重装 windows，使用 Windows11 专业版官方镜像。</p><p>安装完成后初始化阶段，我登录了我的微软帐号，并设置我的用户名，然而 <code>C:/Users/</code> 下的用户文件夹名字是我的邮箱前五位，而不是我设置的用户名。没有任何方法可以更改这个文件夹的名字，网上教程全部无效，包括改注册表（<code>Profilelist</code> 里面根本没东西）、<code>netplwiz</code> 修改用户名（不影响文件夹名）。</p><p>最终我尝试新建一个用户，然后把老的用户删掉，这样成功将用户文件夹名字改成我想要的。接下来一次重启，windows 要求我设置 PIN 码，否则我必须使用邮箱验证码登录，我设置了。</p><p>再次重启，登录界面的用户名是我已经删除的老用户的用户名；报错 Something happened and your PIN isn&#39;t available. Click to set up your PIN again. 只有一个按钮能够点击，点击后屏幕闪烁一次，仍然报错。按住 Shift 重启，进入启动选项，<a href="https://answers.microsoft.com/en-us/windows/forum/all/something-happened-and-your-pin-isnt-available/5365fc65-27a9-4ec6-b9c3-032b54da50f9" target="_blank" rel="noopener noreferrer">清理 Ngc 文件夹</a>无效，安全模式启动无效。</p><p>于是只好重装，我刚装好的系统已经配了一个小时，全部变成一场空。还好我有双系统，重装前还能备份一点点配好的东西。</p><h3 id="百度网盘图标" tabindex="-1"><a class="header-anchor" href="#百度网盘图标"><span>百度网盘图标</span></a></h3>`,14)),s("p",null,[i[76]||(i[76]=e("偶然我有一次需要使用百度网盘，我将其安装在 ")),n(t,{to:"/articles/ramdisk.html"},{default:l(()=>i[75]||(i[75]=[e("RAMDisk")])),_:1}),i[77]||(i[77]=e(" 里。结果重启后百度网盘留下了一大堆垃圾都没有清除。其中最烦的就是在 ")),i[78]||(i[78]=s("em",null,"此电脑",-1)),i[79]||(i[79]=e(" 里留下的百度网盘图标，windows 11 的这个图标也不能右键删除，非常鸡肋。"))]),i[89]||(i[89]=a(`<p>解法：注册表打开 <code>计算机\\HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\MyComputer\\NameSpace</code> 删除全部文件夹。</p><p>顺带说一句，把软件安装在 RAMDisk 以后记得手动卸载。</p><h3 id="端口随机占用" tabindex="-1"><a class="header-anchor" href="#端口随机占用"><span>端口随机占用</span></a></h3><p>win11 下有时代理软件端口突然无法使用，有时测试网站 localhost 端口无法使用，随机性很强。于是去搜了下<a href="https://www.cnblogs.com/fanqisoft/p/17071121.html" target="_blank" rel="noopener noreferrer">解法</a>。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netsh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ipv4</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dynamic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">53536</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> num=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">12000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">netsh</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> int</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ipv6</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dynamic</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">53536</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> num=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">12000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> winnat</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">net</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> winnat</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p><em>Windows11 轻松设置工具</em> 里的禁用 UAC 并不是彻底禁用，只是取消了弹窗；但是如果修改注册表(<code>[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System] &quot;EnableLUA&quot;=dword:00000000</code> 然后重启)彻底禁用，又会让你的 shell 和运行都默认以管理员身份进行，会导致很多问题，我更不能接受。因此还是别想着彻底禁用吧。 <a href="#footnote-ref1" class="footnote-backref">↩︎</a></p></li><li id="footnote2" class="footnote-item"><p>购入电脑 11 个月，固态盘写入量已达 10T。我平常一直很注意控制写入，大文件、下载缓存都存在移动硬盘上。 <a href="#footnote-ref2" class="footnote-backref">↩︎</a></p></li><li id="footnote3" class="footnote-item"><p>例如，若有一个 <code>src</code> 目录，在 linux 下 <code>ln -s /mnt/d/src /mnt/d/tmp</code> 创建 <code>/mnt/d/tmp/src</code> 的软连接，则在 windows 上需要 <code>mklink /D D:\\tmp\\src D:\\src</code> 指明 <code>src</code> 的名称。 <a href="#footnote-ref3" class="footnote-backref">↩︎</a></p></li></ol></section>`,7))])}const b=p(m,[["render",A],["__file","windows_setting.html.vue"]]),c=JSON.parse('{"path":"/articles/windows_setting.html","title":"设置 Windows","lang":"zh-CN","frontmatter":{"date":"2022-05-21T00:00:00.000Z","icon":"computer","category":["教程"],"tag":["桌面端","CLI","Windows"],"description":"设置 Windows 好的设置能够在未来降低血压，并大幅提高工作效率。 对 win11 的设置 前言 我最初入坑 win11 是由于入手了 12500H，有大小核，即使很不想使用 win11，也只能硬上了。 后来用了两年，因为毛病越积越多，20241216 我又重装了一次 win11。 202503 购买台式机，又装一次。 总之我也在使用 window...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"设置 Windows\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-05-21T00:00:00.000Z\\",\\"dateModified\\":\\"2025-08-18T15:21:27.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://absx.pages.dev/articles/windows_setting.html"}],["meta",{"property":"og:site_name","content":"绝对值_x 的博客"}],["meta",{"property":"og:title","content":"设置 Windows"}],["meta",{"property":"og:description","content":"设置 Windows 好的设置能够在未来降低血压，并大幅提高工作效率。 对 win11 的设置 前言 我最初入坑 win11 是由于入手了 12500H，有大小核，即使很不想使用 win11，也只能硬上了。 后来用了两年，因为毛病越积越多，20241216 我又重装了一次 win11。 202503 购买台式机，又装一次。 总之我也在使用 window..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-18T15:21:27.000Z"}],["meta",{"property":"article:tag","content":"Windows"}],["meta",{"property":"article:tag","content":"CLI"}],["meta",{"property":"article:tag","content":"桌面端"}],["meta",{"property":"article:published_time","content":"2022-05-21T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-18T15:21:27.000Z"}]]},"git":{"createdTime":1701577872000,"updatedTime":1755530487000,"contributors":[{"name":"lxl66566","username":"lxl66566","email":"18259734087@163.com","commits":38,"url":"https://github.com/lxl66566"}]},"readingTime":{"minutes":17.9,"words":5370},"filePathRelative":"articles/windows_setting.md","localizedDate":"2022年5月21日","excerpt":"\\n","autoDesc":true}');export{b as comp,c as data};
