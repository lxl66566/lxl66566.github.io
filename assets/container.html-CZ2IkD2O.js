import{_ as r,e as k,f as l,k as d,i as o,j as e,r as p,o as c,g as i,h as s}from"./app-T5CVgoj6.js";const g={};function A(y,a){const h=p("Tabs");return c(),k("div",null,[a[4]||(a[4]=l(`<h1 id="å®¹å™¨" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨"><span>å®¹å™¨</span></a></h1><p>å…¶å®æˆ‘ä¸€ç›´ä¸å–œæ¬¢å®¹å™¨ï¼Œæˆ‘è®¤ä¸ºå¤„ç†å¤æ‚ä¾èµ–æ˜¯åŒ…ç®¡ç†å™¨çš„èŒè´£ï¼Œæ¨ç»™ container æ˜¯æ¯”è¾ƒç²—æš´æµªè´¹çš„åšæ³•ã€‚</p><p>ç„¶è€Œçœ‹åˆ°è™šæ‹Ÿæœºä»¥åï¼Œæˆ‘æ„Ÿè§‰å®¹å™¨è¿˜æ˜¯æœ‰å®ƒçš„ä»·å€¼çš„<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>ã€‚ğŸ˜¦</p><h2 id="é€‰æ‹©" tabindex="-1"><a class="header-anchor" href="#é€‰æ‹©"><span>é€‰æ‹©</span></a></h2><p>æœ€æµè¡Œçš„å®¹å™¨å·¥å…·åº”è¯¥å°±æ˜¯ docker äº†å§ï¼Œç„¶è€Œå› ä¸ºå‡ æ¬¡è´Ÿé¢æ¶ˆæ¯<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup><sup class="footnote-ref"><a href="#footnote3">[3]</a><a class="footnote-anchor" id="footnote-ref3"></a></sup>è®©æˆ‘å¯¹å…¶æ²¡æœ‰ä»»ä½•å¥½æ„Ÿã€‚</p><p>æˆ‘ä¹Ÿå°è¯•åœ¨ wsl2 ä¸Šéƒ¨ç½²äº†ä¸€ä¸‹ dockerï¼Œç„¶è€Œç”±äºæ²¡æœ‰ systemctl è€Œæ— æ³•å¯åŠ¨å…¶å®ˆæŠ¤è¿›ç¨‹ã€‚<a href="https://github.com/gdraheim/docker-systemctl-replacement" target="_blank" rel="noopener noreferrer">docker-systemctl-replacement</a> ä¸å¯ç”¨ï¼Œéœ€è¦ nohup å¯åŠ¨ <code>dockerd</code>ã€‚æˆ‘çš„ wsl2 åªæœ‰çº¯å‘½ä»¤è¡Œï¼ŒæŠ˜è…¾è®¸ä¹…ï¼Œæµªè´¹äº†è®¸å¤šæ—¶é—´ã€‚</p><p>äºæ˜¯æˆ‘è½¬å‘äº† <a href="https://docs.podman.io" target="_blank" rel="noopener noreferrer">podman</a>ï¼Œè¿™æ˜¯ä¸€ä¸ª <strong>daemonless, open source</strong>ï¼ˆå¼€æºçš„ã€æ— å®ˆæŠ¤è¿›ç¨‹çš„ï¼‰å®¹å™¨å·¥å…·ï¼Œå®Œç¾è§£å†³äº†æˆ‘å¯¹ docker çš„åè§ã€‚å¹¶ä¸”å…¶å…¼å®¹æ€§ä¹Ÿä¸é”™ï¼š<em>Most users can simply alias Docker to Podman (alias docker=podman) without any problems.</em></p><p>å¯ä»¥å‰å¾€ <a href="#external">external 1.</a> æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>æœ¬ç¯‡ä¸­ docker å’Œ podman å‘½ä»¤æ˜¯æ··ç”¨çš„ã€‚</p></div><h2 id="å·¥å…·" tabindex="-1"><a class="header-anchor" href="#å·¥å…·"><span>å·¥å…·</span></a></h2><ul><li><a href="https://github.com/jesseduffield/lazydocker" target="_blank" rel="noopener noreferrer">lazydocker</a>ï¼šlazygit çš„åŒä½œè€…åšçš„ docker TUIï¼Œä¸å†éœ€è¦èƒŒ docker æŒ‡ä»¤ã€‚ <ul><li>å®é™…ä¸Š docker çš„ cli ç¡®å®å¾ˆå‚»é€¼ï¼Œå¾ˆå¤šåœ°æ–¹ä¾èµ– hashã€‚</li></ul></li></ul><h2 id="åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€"><span>åŸºç¡€</span></a></h2><p>çœ‹çœ‹<a href="https://github.com/containers/podman/blob/main/docs/tutorials/podman_tutorial_cn.md" target="_blank" rel="noopener noreferrer">tutorial</a>ã€‚</p><p><strong>å®¹å™¨</strong>å’Œ<strong>é•œåƒ</strong>æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œå¯ä»¥ç±»æ¯”ä¸ºç³»ç»Ÿå’Œç³»ç»Ÿç›˜ã€‚</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                                 # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                              # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ...</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                         # -d è¡¨ç¤ºåå°è¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                          </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># åˆ é™¤å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                        </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹è¾“å‡º (stdout + stderr)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">nam</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;                     </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŒç»­æŸ¥çœ‹è¾“å‡º (stdout + stderr)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">repositor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">y&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">g&gt;            </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ‹‰å–é•œåƒåˆ°æœ¬åœ°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> images</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                             # æŸ¥çœ‹é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">image</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> I</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">D&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">repositor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">y&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ta</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">g&gt;  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é‡å‘½åé•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stop</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -aq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)              </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># åœæ­¢æ‰€æœ‰å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -aq</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)                </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># åˆ é™¤æ‰€æœ‰å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rmi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> $(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> images</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -q</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)            </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># åˆ é™¤æ‰€æœ‰é•œåƒ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è°ƒè¯•" tabindex="-1"><a class="header-anchor" href="#è°ƒè¯•"><span>è°ƒè¯•</span></a></h3><ul><li>æˆ‘å¯ä»¥ä»ä¸€ä¸ª image æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¿½ç•¥ CMD è€Œç›´æ¥è¿› <code>/bin/bash</code> è¿›è¡Œ image è°ƒè¯•ï¼š<code>docker run -it &lt;image&gt; /bin/bash</code></li><li>æˆ‘ä¹Ÿå¯ä»¥è¿›å…¥ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨çš„ä¸»è¿›ç¨‹ï¼š<code>docker attach &lt;container&gt;</code></li><li>ä½†æ˜¯æˆ‘ä¸èƒ½å¯¹ä¸€ä¸ªè¿è¡Œä¸­æˆ–å·²é€€å‡ºçš„å®¹å™¨<strong>æ–°å¼€ä¸€ä¸ª bash è¿›ç¨‹</strong>è¿›è¡Œè°ƒè¯•ï¼Œè¿™æ˜¯éå¸¸è‡´å‘½çš„ã€‚åªèƒ½ç”¨ <code>docker exec</code>ã€‚</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --entrypoint</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /bin/bash</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">imag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;     </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ä» image åˆ›å»ºå®¹å™¨å¹¶è¿›å…¥ï¼ˆä½œä¸ºè°ƒè¯•ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                                    # æ„å»ºå®¹å™¨é•œåƒï¼ˆéœ€è¦å…ˆä¸‹è½½ docker-buildxï¼Œå¦åˆ™ä¼šåƒä¸€ä¸ª deprecatedã€‚</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                                                  # ä¸‹è½½å®Œåï¼Œdocker build ç›¸å½“äº docker buildx build çš„ aliasï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> prune</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                               # æ¸…ç†æ‰€æœ‰ç¼“å­˜ã€éè¿è¡Œä¸­çš„é•œåƒ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> builder</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> prune</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                           # æ¸…ç†æ„å»ºç¼“å­˜</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä»£ç†" tabindex="-1"><a class="header-anchor" href="#ä»£ç†"><span>ä»£ç†</span></a></h2><p><a href="https://wiki.archlinuxcn.org/wiki/Docker#HTTP%E4%BB%A3%E7%90%86" target="_blank" rel="noopener noreferrer">src</a></p><p>ç®€è¨€ä¹‹ï¼šå®ˆæŠ¤è¿›ç¨‹å’Œ docker éƒ½éœ€è¦é…ç½®ï¼Œ<code>/etc/docker/daemon.json</code> å’Œ <code>~/.docker/config.json</code> éƒ½éœ€è¦å†™å…¥ä»£ç†å†…å®¹ã€‚</p><p>è€Œä¸”æ³¨æ„ï¼Œå®¹å™¨å†…éƒ¨æ— æ³•ç›´æ¥é€šè¿‡ localhostï¼Œ127.0.0.1 è®¿é—®å®¿ä¸»æœºä»£ç†ç«¯å£ï¼Œè§£æ³•åœ¨<a href="#%E5%AE%B9%E5%99%A8%E4%B8%AD%E8%AE%BF%E9%97%AE%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%9C%8D%E5%8A%A1">å®¹å™¨ä¸­è®¿é—®å®¿ä¸»æœºæœåŠ¡</a>ã€‚</p><p>å¦‚æœä½ çš„å®¹å™¨æœ‰æŒ‡å®šè™šæ‹Ÿå­ç½‘ï¼Œè®°å¾—å°†äº’ç›¸çš„å®¹å™¨ååŠ å…¥ <code>NO_PROXY</code>ï¼Œå¦åˆ™å¯èƒ½å‡ºç°é€šä¿¡é”™è¯¯ã€‚</p><h2 id="dockerhub-mirror" tabindex="-1"><a class="header-anchor" href="#dockerhub-mirror"><span>dockerhub mirror</span></a></h2><p>åœ¨ 2024 å¹´ï¼Œä¸­å›½å¤§è§„æ¨¡ä¸‹æ¶äº† docker é•œåƒã€‚æ‰€ä»¥ç°åœ¨æƒ³è¦ä½¿ç”¨ docker ä»“åº“ä¼šæœ‰ä¸€äº›éº»çƒ¦ã€‚<a href="https://taogenjia.com/2024/08/19/Using-docker-in-China-2024/" target="_blank" rel="noopener noreferrer">Using docker in China 2024</a> è¿™ç¯‡æ–‡ç« ä»‹ç»äº†ä¸€äº›æ–¹æ³•ï¼Œæˆ‘å°è¯•äº† cloudflare åä»£ã€‚ä¸è¿‡åä»£çš„åæœä¹Ÿæ˜¯ UNAUTHORIZEDã€‚</p><p>ç„¶åè¿˜è¸©äº†<a href="#%E6%97%A0%E6%B3%95%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F">åº”ç”¨é•œåƒçš„å‘</a>ã€‚</p><h2 id="å®¹å™¨ä¸­è®¿é—®å®¿ä¸»æœºæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨ä¸­è®¿é—®å®¿ä¸»æœºæœåŠ¡"><span>å®¹å™¨ä¸­è®¿é—®å®¿ä¸»æœºæœåŠ¡</span></a></h2><p>æœ€ä½³è§£æ³•ï¼šä½¿ç”¨å®¿ä¸»æœºçš„å±€åŸŸç½‘ ipï¼Œå¹¶ä¸”å…³æ‰é˜²ç«å¢™ã€‚</p><p>å…¶ä»–åŠæ³•éƒ½æŒºéº»çƒ¦çš„ï¼Œä¾‹å¦‚ <code>host.docker.internal</code> åªåœ¨ Docker Desktop ä¸Šèƒ½ç”¨ï¼Œè€Œ linux <code>ip addr show docker0</code> çš„ <code>172.17.0.1</code> è¯•è¿‡äº†ç”¨ä¸äº†ã€‚</p><h2 id="dockerfile" tabindex="-1"><a class="header-anchor" href="#dockerfile"><span>Dockerfile</span></a></h2><p>å¦‚æœä½ éœ€è¦åˆ¶ä½œä¸€ä¸ªé•œåƒï¼Œé‚£ä¹ˆæœ¬è´¨ä¸Šå°±æ˜¯å†™ä¸€ä¸ª Dockerfile ç”¨æ¥æè¿°é•œåƒã€‚</p>`,31)),d(" prettier-ignore "),a[5]||(a[5]=l(`<table><thead><tr><th>æŒ‡ä»¤</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>ENV</td><td>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚å¯¹æ‰€æœ‰ä¹‹åçš„æŒ‡ä»¤ç”Ÿæ•ˆï¼Œå¯ä»¥å¤šæ¬¡è¦†ç›–ã€‚</td></tr><tr><td>COPY</td><td>å°†å¤–éƒ¨æ–‡ä»¶å¤åˆ¶åˆ°å®¹å™¨å†…ã€‚äº†è§£æ›´å¤šè¯·é˜…è¯»<a href="#%E5%9D%91">å‘</a>ã€‚</td></tr></tbody></table><p>æ¯ä¸ª <code>ADD</code>ï¼Œ<code>COPY</code>ï¼Œ<code>RUN</code> æŒ‡ä»¤ä¼šä¸º image åˆ›å»ºä¸€ä¸ªåªè¯» UnionFS layerã€‚layer æ˜¯ç”¨äºç¼“å­˜çš„ï¼Œå½“ä¿®æ”¹äº† Dockerfile çš„æŸä¸€è¡Œåï¼Œç³»ç»Ÿåªä¼šæ„å»ºæ­¤è¡Œå’Œæ‰€æœ‰ä¹‹åçš„æŒ‡ä»¤ï¼Œä¹‹å‰çš„ layer å¯ä»¥è¢«è·³è¿‡æ„å»ºã€‚ä¹Ÿæ­£æ˜¯å› ä¸º layer çš„å­˜åœ¨ï¼Œå°½å¯èƒ½ä¸è¦å†™ç´§é‚»çš„ <code>RUN</code> è¯­å¥ï¼Œå¦‚æœæ¯ä¸ª command éƒ½åˆ†é…ä¸€ä¸ª <code>RUN</code> è¯­å¥ä¼šå¯¼è‡´ layer è¿‡å¤šï¼Œå½±å“å­˜å‚¨å’Œæ€§èƒ½ã€‚</p><h3 id="å‘" tabindex="-1"><a class="header-anchor" href="#å‘"><span>å‘</span></a></h3><p>Dockerfile çš„å‘å®åœ¨æ˜¯å¤ªå¤šäº†ï¼ŒçœŸæ˜¯ä»–å¦ˆçš„å±ä¸€æ ·çš„è®¾è®¡ã€‚</p><ul><li>ç±»ä¼¼ .gitignoreï¼ŒDocker ä¹Ÿæœ‰ .dockerignore ç”¨äºåœ¨ COPY æ—¶å¿½ç•¥æ–‡ä»¶/æ–‡ä»¶å¤¹ã€‚ä½†æ˜¯å®ƒå’Œ .gitignore ä¸ä¸€è‡´çš„åœ°æ–¹å¾ˆå¤šï¼š <ol><li>.gitignore å¯ä»¥æ”¾åœ¨ä»»æ„å­ç›®å½•ä¸‹ï¼Œ.dockerignore åªèƒ½æ”¾åœ¨ä½ çš„ build ç›®å½•ä¸‹ï¼Œå¦åˆ™ä¸ç”Ÿæ•ˆã€‚</li><li>.gitignore é‡Œçš„å†…å®¹å¯ä»¥åŒ¹é…ä»»æ„å±‚å­ç›®å½•ä¸‹çš„æ–‡ä»¶åï¼Œè€Œ .dockerfile åªèƒ½åŒ¹é… build ç›®å½•ä¸‹çš„è·¯å¾„ã€‚ç›¸å½“äº .gitignore é‡Œçš„ <code>xxx</code> åœ¨ .dockerfile é‡Œéƒ½è¦å†™æˆ <code>**/xxx</code> æˆ–è€…ç»å¯¹è·¯å¾„ <code>/aaa/bbb/xxx</code>ã€‚</li></ol></li><li><code>COPY a b</code> å‘½ä»¤æŒ‡çš„æ˜¯å°† <code>a</code> ç›®å½•<strong>ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</strong> copy åˆ° <code>b</code> ç›®å½•é‡Œï¼Œè€Œä¸æ˜¯å°† <code>a</code> ç›®å½•æœ¬èº« copy åˆ° <code>b</code> ç›®å½•é‡Œã€‚è¿™è·Ÿ <code>cp -r</code> çš„è¡¨ç°åˆä¸ä¸€æ ·ã€‚</li></ul><h2 id="ç½‘ç»œ" tabindex="-1"><a class="header-anchor" href="#ç½‘ç»œ"><span>ç½‘ç»œ</span></a></h2><p>docker ç½‘ç»œæœ‰å››ç§æ¨¡å¼ï¼ŒHostï¼ˆå’Œå®¿ä¸»å…±ç”¨ç½‘å¡ IP ç«¯å£ï¼‰, Containerï¼ˆå’Œå…¶ä»–å®¹å™¨å…±ç”¨ç½‘å¡ IP ç«¯å£ï¼‰, None, Bridgeï¼ˆè™šæ‹Ÿå­ç½‘ï¼‰ã€‚</p><p>ä¸€èˆ¬å®¹å™¨é—´é€šä¿¡å¯ä»¥ç”¨ Container ä¹Ÿå¯ä»¥ç”¨ Bridgeï¼ŒContainer ä¸ç”¨é¢å¤–é…ç½®ï¼ŒBridge åˆ™æ›´çµæ´»ã€‚</p><p>Bridge ç»„ç½‘å¤§è‡´å¦‚ä¸‹ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xxx</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                                           # å…ˆåˆ›å»ºè™šæ‹Ÿå­ç½‘</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é€šè¿‡ --network (--net) æŒ‡å®šè™šæ‹Ÿå­ç½‘</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> AAA</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 8000:8000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xxx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">imag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt;         </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å‡è®¾è¿™æ˜¯ä¸€ä¸ªæä¾›æœåŠ¡çš„å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -it</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> BBB</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 8000:8000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --network</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xxx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">imag</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">e&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">sh</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     # å‡è®¾è¿™æ˜¯ä¸€ä¸ªè®¿é—®æœåŠ¡çš„å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">NO_PROXY</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">AAA</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://AAA:8000</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                                # è®¿é—® AAA çš„æœåŠ¡ã€‚å¦‚æœä½ è®¾ç½®äº†ä»£ç†ï¼Œè¦ä¿è¯è™šæ‹Ÿå­ç½‘å†…çš„è¯·æ±‚ä¸èµ°ä»£ç†ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹å‡ºï¼ŒBridge éœ€è¦ä¿®æ”¹å®¹å™¨å†…ç¨‹åºçš„æºç æˆ– env ä»¥é€‚é…æ–°çš„ base urlï¼Œè¿˜æ˜¯æœ‰ä¸€äº›éº»çƒ¦çš„ã€‚å¥½å¤„æ˜¯å¯ä»¥åŠ æ–°çš„å®¹å™¨åˆ°å­ç½‘ï¼Œæˆ–è€…éšä¾¿æ›´æ¢æœåŠ¡æä¾›å®¹å™¨éƒ½è¡Œã€‚</p><h2 id="ä¸ºç¦»çº¿æœºå™¨ä¸‹è½½é•œåƒ" tabindex="-1"><a class="header-anchor" href="#ä¸ºç¦»çº¿æœºå™¨ä¸‹è½½é•œåƒ"><span>ä¸ºç¦»çº¿æœºå™¨ä¸‹è½½é•œåƒ</span></a></h2><p>å‡è®¾æˆ‘æœ‰æ— æ³•è”ç½‘çš„å†…ç½‘æœåŠ¡å™¨ï¼Œæˆ‘éœ€è¦ä½¿ç”¨å…¶è·‘é•œåƒã€‚</p>`,13)),o(h,{id:"202",data:[{id:"ä½¿ç”¨ docker å¯¼å‡º"},{id:"ä½¿ç”¨è„šæœ¬ä¸‹è½½ï¼ˆæ— æ³•ä½¿ç”¨ï¼‰"}]},{title0:e(({value:t,isActive:n})=>a[0]||(a[0]=[s("ä½¿ç”¨ docker å¯¼å‡º")])),title1:e(({value:t,isActive:n})=>a[1]||(a[1]=[s("ä½¿ç”¨è„šæœ¬ä¸‹è½½ï¼ˆæ— æ³•ä½¿ç”¨ï¼‰")])),tab0:e(({value:t,isActive:n})=>a[2]||(a[2]=[i("p",null,"å¦‚æœä½ çš„ç”µè„‘ä¸Šå®‰è£…äº† dockerï¼Œä½ åº”è¯¥ä¼˜å…ˆé€‰æ‹©è¿™ä¸ªæ–¹æ³•ã€‚",-1),i("ol",null,[i("li",null,[s("ä½¿ç”¨ docker pull æ‹‰å–é•œåƒã€‚æ³¨æ„ä½ çš„"),i("strong",null,"ç›®æ ‡æ¶æ„"),s("éœ€è¦ä¸æœåŠ¡å™¨çš„æ¶æ„ç›¸åŒã€‚"),i("div",{class:"language-sh line-numbers-mode","data-highlighter":"shiki","data-ext":"sh",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"docker"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," pull"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," --platform"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," linux/arm64"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," hectorqin/reader:openj9-latest")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"})])])]),i("li",null,[s("ä½¿ç”¨ "),i("code",null,"docker save"),s(" å¯¼å‡ºæŒ‡å®šé•œåƒã€‚å¦‚æœä½ æœ‰å¤šä¸ªé•œåƒï¼Œå¹¶ä¸” docker å†…æ‰€æœ‰é•œåƒéƒ½éœ€è¦å¯¼å‡ºï¼Œä½ å¯ä»¥ç”¨è„šæœ¬æ‰¹é‡å¯¼å‡ºï¼š"),i("div",{class:"language-sh line-numbers-mode","data-highlighter":"shiki","data-ext":"sh",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"#!/bin/bash")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"output_dir"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"docker_images"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"mkdir"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," -p"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},' "'),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$output_dir"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"for"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}}," image"),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}}," in"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," $("),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"docker"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," images"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," --format"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},' "{{.Repository}}:{{.Tag}}"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"); "),i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"do")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"    echo"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},' "Saving '),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$image"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'..."')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"    file_name"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#56B6C2"}},"="),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},"$("),i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"echo"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},' "'),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$image"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}}," | "),i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"sed"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," 's/[\\/:]/_/g'"),i("span",{style:{"--shiki-light":"#383A42","--shiki-dark":"#ABB2BF"}},")"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},".tar")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"    docker"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," save"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," -o"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},' "'),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$output_dir"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},"/"),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$file_name"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"'),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},' "'),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$image"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A626A4","--shiki-dark":"#C678DD"}},"done")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#0184BC","--shiki-dark":"#56B6C2"}},"echo"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},' "All images saved to '),i("span",{style:{"--shiki-light":"#E45649","--shiki-dark":"#E06C75"}},"$output_dir"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}},'/"')])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])])]),i("li",null,[s("é€šè¿‡ rsync æˆ–è€…å…¶ä»–æ–¹æ³•å°†æ‰€æœ‰ "),i("code",null,".tar"),s(" ä¼ è¾“åˆ°ç›®æ ‡æœºå™¨ä¸Š")]),i("li",null,[s("ä½¿ç”¨ "),i("code",null,"docker load"),s(" åŠ è½½æ‰€æœ‰é•œåƒã€‚")])],-1)])),tab1:e(({value:t,isActive:n})=>a[3]||(a[3]=[i("p",null,[i("a",{href:"https://github.com/NotGlop/docker-drag",target:"_blank",rel:"noopener noreferrer"},"docker-drag"),s(" ç”¨ä¸äº†ï¼Œåˆ«çœ‹äº†ã€‚æˆ‘ç”¨çš„ç®—æ˜¯å®˜æ–¹çš„ moby è„šæœ¬å§ã€‚")],-1),i("div",{class:"language-sh line-numbers-mode","data-highlighter":"shiki","data-ext":"sh",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[i("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"wget"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," https://raw.githubusercontent.com/moby/moby/master/contrib/download-frozen-image-v2.sh")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"chmod"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," +x"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," download-frozen-image-v2.sh")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"bash"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," download-frozen-image-v2.sh"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," reader"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," hectorqin/reader:openj9-latest")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#4078F2","--shiki-dark":"#61AFEF"}},"tar"),i("span",{style:{"--shiki-light":"#986801","--shiki-dark":"#D19A66"}}," -cvaf"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," reader.tar"),i("span",{style:{"--shiki-light":"#50A14F","--shiki-dark":"#98C379"}}," reader")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#A0A1A7","--shiki-light-font-style":"italic","--shiki-dark":"#7F848E","--shiki-dark-font-style":"italic"}},"# è¿™æ ·å°±æŠŠé•œåƒä¸‹è½½å¹¶æ‰“æˆäº† tar åŒ…ã€‚")])])]),i("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"}),i("div",{class:"line-number"})])],-1),i("p",null,"ä¸è¿‡è¿™ä¸ªè„šæœ¬åœ¨ 20241204 æ—¶è¿˜æœ‰ bugï¼Œå°±æ˜¯å¿…é¡»æŒ‡å®š image çš„ tagï¼Œå¦åˆ™ä¸‹è½½é“¾æ¥ä¼š 404ã€‚",-1),i("p",null,"å¥½ä¸å®¹æ˜“ä¸‹è½½å®Œäº†ï¼Œç»“æœæ‰“å‡ºçš„ tar è¿˜ä¸èƒ½ç›´æ¥è¢« docker load åŠ è½½ï¼Œéå¸¸ç¥å¥‡ã€‚æˆ‘ä¸çŸ¥é“æ€ä¹ˆåŠäº†ã€‚",-1)])),_:1}),a[6]||(a[6]=l(`<h2 id="docker-compose" tabindex="-1"><a class="header-anchor" href="#docker-compose"><span>docker-compose</span></a></h2><p>docker-compose æ˜¯ docker çš„ä¸Šä¸€å±‚æŠ½è±¡ï¼Œä¸€è¨€ï¼š<strong>ä¸€ä¸ª yaml æ–‡ä»¶ï¼ŒæŒ‡æ˜äº†å¤šä¸ªå®¹å™¨çš„å‚æ•°</strong>ã€‚å®é™…ä¸Šä½¿ç”¨ä¸€ä¸ª bash è„šæœ¬ä¹Ÿèƒ½åšåˆ° docker-compose åšçš„äº‹ã€‚</p><h2 id="å…³äºå¼€æœºè‡ªå¯åŠ¨" tabindex="-1"><a class="header-anchor" href="#å…³äºå¼€æœºè‡ªå¯åŠ¨"><span>å…³äºå¼€æœºè‡ªå¯åŠ¨</span></a></h2><p>docker å®¹å™¨éå¸¸æ–¹ä¾¿ï¼Œç”¨ <code>--restart always</code>ï¼ˆæ€»æ˜¯è‡ªåŠ¨é‡å¯ï¼‰æˆ– <code>--restart unless-stopped</code>ï¼ˆé™¤éæ‰‹åŠ¨åœæ­¢ï¼Œå¦åˆ™æ€»æ˜¯è‡ªåŠ¨é‡å¯ï¼‰å¯åŠ¨å®¹å™¨å°±è¡Œã€‚</p><p>ä½†æ˜¯ podman æ˜¯ rootless çš„ï¼Œæ²¡æœ‰ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹å»å«é†’å®¹å™¨ï¼Œ<code>--restart</code> å‚æ•°å¯¹å…¶æ— æ•ˆã€‚ä½¿ç”¨ systemd ç”¨æˆ·æœåŠ¡çš„è¯ï¼ŒæŒ‰ç…§ç½‘ä¸Šæ•™ç¨‹ <code>podman generate systemd</code> åˆä¼šå‘ç° command deprecatedï¼Œè€Œä¸”è¿™æ ·æ— æ³•å¯åŠ¨ podman-compose ç”Ÿæˆçš„ podã€‚</p><p>ç„¶åæˆ‘åˆ<a href="https://t.me/withabsolutex/2199" target="_blank" rel="noopener noreferrer">æŠ˜è…¾äº†ä¸€æ®µæ—¶é—´</a>ã€‚é‡åˆ°äº†å¤ªå¤šæ— è¯­çš„äº‹æƒ…ã€‚</p><p>æœ€åæˆ‘çš„è§£å†³æ–¹æ³•ï¼šå›å½’æœ¬æºï¼Œæ¯æ¬¡å¼€æœºæ—¶è¿è¡Œ <code>user-startup add &#39;/usr/bin/podman pod start pod_root&#39;</code> æ¥å¯åŠ¨ podã€‚è‡³äºå¼€æœºè‡ªå¯åŠ¨å‘½ä»¤ï¼Œå¯ä»¥ç”¨æˆ‘çš„ <a href="https://github.com/lxl66566/user-startup-rs" target="_blank" rel="noopener noreferrer">user-startup</a>ï¼Œä¸€è¡Œæå®šã€‚</p><h2 id="é‡åˆ°çš„é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#é‡åˆ°çš„é—®é¢˜"><span>é‡åˆ°çš„é—®é¢˜</span></a></h2><h3 id="æ— æ³•åº”ç”¨é•œåƒ" tabindex="-1"><a class="header-anchor" href="#æ— æ³•åº”ç”¨é•œåƒ"><span>æ— æ³•åº”ç”¨é•œåƒ</span></a></h3><ul><li>ç½‘ä¸Šæ•™ç¨‹ä¿®æ”¹é•œåƒéƒ½æ˜¯ <code>/etc/docker/daemon.json</code>ï¼Œæ”¹å®Œé‡å¯ dockerã€‚ä½†æ˜¯æˆ‘é‡å¯åå¹¶æ— æ³•åº”ç”¨é•œåƒã€‚ <ul><li>OSï¼šiStoreOS</li></ul></li></ul><p>è§£æ³•ï¼š<code>ps | grep dockerd</code>ï¼Œå¯ä»¥çœ‹åˆ°åº”ç”¨çš„ config æ˜¯ <code>--config-file=/tmp/dockerd/daemon.json</code>ï¼Œæ ¹æœ¬å°±ä¸æ˜¯ <code>/etc/docker/daemon.json</code>ã€‚</p><p>ç»§ç»­çœ‹ <code>/etc/init.d/dockerd</code>ï¼Œå¯ä»¥å‘ç°å…¶ config æ˜¯å†™åœ¨å¥‡æ€ªçš„åœ°æ–¹ï¼Œå¹¶ä¸”æ ¼å¼ä¹Ÿæ˜¯è‡ªå®šä¹‰æ ¼å¼ã€‚ï¼ˆ<a href="https://t.me/withabsolutex/2119" target="_blank" rel="noopener noreferrer">è¢«æˆ‘å–·äº†</a>ï¼‰</p><h3 id="podman-æŒ‡å®š-registry" tabindex="-1"><a class="header-anchor" href="#podman-æŒ‡å®š-registry"><span>podman æŒ‡å®š registry</span></a></h3><ul><li>podman æ‹‰å–é•œåƒæ—¶å¯èƒ½ä¸æ”¯æŒçŸ­åç§°ï¼Œéœ€è¦åœ¨åç§°å‰åŠ  <code>docker.io/</code> å‰ç¼€ï¼Œæˆ–è€…å¦‚ external 1. æ‰€è¿°ï¼šOpen your <code>$HOME/.config/containers/registries.conf</code> file and paste the following contents: <code>unqualified-search-registries=[&quot;docker.io&quot;]</code></li></ul><h3 id="var-run-docker-sock-connect-permission-denied" tabindex="-1"><a class="header-anchor" href="#var-run-docker-sock-connect-permission-denied"><span>/var/run/docker.sock: connect: permission denied</span></a></h3><p>è¿™ä¸ªä¹Ÿæ˜¯å¸¸è§é—®é¢˜äº†ï¼Œå®ˆæŠ¤è¿›ç¨‹è¿è¡Œåœ¨ root ä¸‹ï¼Œæ™®é€šç”¨æˆ·æ— æ³•è®¿é—®ã€‚è§£æ³•(<a href="https://stackoverflow.com/questions/48568172" target="_blank" rel="noopener noreferrer">ref</a>)ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usermod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -aG</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $USER</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ç„¶åé‡æ–°ç™»å½•ã€‚</p><h3 id="å®‰è£…é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#å®‰è£…é—®é¢˜"><span>å®‰è£…é—®é¢˜</span></a></h3><p>æ­£å¸¸çš„ Linux å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†å™¨å®‰è£…éƒ½ä¸ä¼šå‡ºç°é—®é¢˜ã€‚ä¸è¿‡ WSL å°±æŠ˜ç£¨äº†ã€‚æˆ‘ç”¨ ArchWSLï¼Œç»“æœ docker æ²¡æœ‰å®ˆæŠ¤è¿›ç¨‹ï¼Œpodman çˆ† subuid é”™è¯¯ã€‚</p><h4 id="docker" tabindex="-1"><a class="header-anchor" href="#docker"><span>docker</span></a></h4><p>ArchWSL ä¸Šæ²¡æœ‰ systemd ç”¨ï¼Œæ‰€ä»¥è‡ªç„¶ä¹Ÿä¸ä¼šè‡ªè¡Œå¯åŠ¨ dockerd å®ˆæŠ¤è¿›ç¨‹ã€‚å› æ­¤æˆ‘å¿…é¡»è¦åœ¨å¦ä¸€ä¸ª console ä¸Šæ‰‹åŠ¨è¿è¡Œ <code>sudo dockerd</code> æ‰èƒ½æ­£å¸¸ä½¿ç”¨ dockerã€‚</p><h4 id="podman" tabindex="-1"><a class="header-anchor" href="#podman"><span>podman</span></a></h4><p>åœ¨ ArchWSL ä¸Š podman æ‰¾ä¸åˆ° <code>/etc/subuid</code>ï¼ŒæŠ¥é”™ã€‚subuid å’Œ subgid æ˜¯ç”¨äº User Namespaces çš„ä¸€éƒ¨åˆ†ï¼Œä¸»è¦ç”¨äºå®¹å™¨åŒ–è½¯ä»¶ï¼Œä»¥åˆ›å»ºç‰¹æƒåˆ†ç¦»çš„å®¹å™¨ã€‚</p><p>è¿è¡ŒæŒ‡ä»¤ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usermod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --add-subuids</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 100000-165535</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">r&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> usermod</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --add-subgids</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 100000-165535</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">r&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£å†³ã€‚</p><h2 id="external" tabindex="-1"><a class="header-anchor" href="#external"><span>external</span></a></h2><ol><li><a href="https://betterstack.com/community/guides/scaling-docker/podman-vs-docker/" target="_blank" rel="noopener noreferrer">Exploring Podman: A More Secure Docker Alternative</a></li><li><a href="https://note.aya1.de/#/22-podman" target="_blank" rel="noopener noreferrer">podman è¸©å‘è®°å½• - Aya</a> | <a href="https://github.com/Brx86/brx86.github.io/blob/5b03fc42683587be98bf6c72685a69d6d86b5c25/22-podman.md" target="_blank" rel="noopener noreferrer">source code</a></li></ol><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="footnote1" class="footnote-item"><p>æŠ½è±¡å±‚æ¬¡ä¸ä»·å€¼å–å‘ç»‘å®šã€‚ <a href="#footnote-ref1" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote2" class="footnote-item"><p>Docker å‘æ‰€æœ‰ Docker Hub ç”¨æˆ·å‘å»é‚®ä»¶ï¼Œå¦‚æœä»–ä»¬æ˜¯ä»¥ç»„ç»‡çš„åä¹‰åˆ›å»ºè´¦å·ï¼Œé‚£ä¹ˆä»–ä»¬çš„è´¦å·å°†è¢«åˆ é™¤ï¼Œæ‰€æœ‰é•œåƒä¹Ÿå°†ä¸€å¹¶åˆ é™¤ï¼Œé™¤éä»–ä»¬å‡çº§åˆ°ä¸€ä¸ªä»˜è´¹çš„å›¢é˜Ÿæ–¹æ¡ˆâ€”â€”å…¶å¹´è´¹ä¸º 420 ç¾å…ƒã€‚<a href="https://www.solidot.org/story?sid=74406" target="_blank" rel="noopener noreferrer">src: solidot</a> <a href="#footnote-ref2" class="footnote-backref">â†©ï¸</a></p></li><li id="footnote3" class="footnote-item"><p>Docker å…¬å¸å°†é™åˆ¶å…¶ Docker Desktop å·¥å…·ä»…ä¾›ä¸ªäººæˆ–å°ä¼ä¸šå…è´¹ä½¿ç”¨ï¼Œå¤§ä¼ä¸šå°†éœ€è¦<a href="https://www.theregister.com/2021/08/31/docker_desktop_no_longer_free/" target="_blank" rel="noopener noreferrer">ä»˜è´¹è®¢é˜…</a>ã€‚è¯¥å…¬å¸è¦æ±‚å‘˜å·¥äººæ•°åœ¨ 250 äººä»¥ä¸Šæˆ–å¹´æ”¶å…¥è¶…è¿‡ä¸€åƒä¸‡ç¾å…ƒçš„ä¼ä¸šå¦‚æœéœ€è¦ä½¿ç”¨ Docker Desktop é‚£ä¹ˆå°±å¿…é¡»ä»˜è´¹è®¢é˜…ã€‚<a href="https://www.solidot.org/story?sid=68775" target="_blank" rel="noopener noreferrer">src: solidot</a> <a href="#footnote-ref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>`,31))])}const m=r(g,[["render",A],["__file","container.html.vue"]]),u=JSON.parse('{"path":"/coding/container.html","title":"å®¹å™¨","lang":"zh-CN","frontmatter":{"icon":"box","date":"2023-11-12T00:00:00.000Z","category":["ç¼–ç¨‹"],"tag":["å·¥å…·"],"description":"å®¹å™¨ å…¶å®æˆ‘ä¸€ç›´ä¸å–œæ¬¢å®¹å™¨ï¼Œæˆ‘è®¤ä¸ºå¤„ç†å¤æ‚ä¾èµ–æ˜¯åŒ…ç®¡ç†å™¨çš„èŒè´£ï¼Œæ¨ç»™ container æ˜¯æ¯”è¾ƒç²—æš´æµªè´¹çš„åšæ³•ã€‚ ç„¶è€Œçœ‹åˆ°è™šæ‹Ÿæœºä»¥åï¼Œæˆ‘æ„Ÿè§‰å®¹å™¨è¿˜æ˜¯æœ‰å®ƒçš„ä»·å€¼çš„[1]ã€‚ğŸ˜¦ é€‰æ‹© æœ€æµè¡Œçš„å®¹å™¨å·¥å…·åº”è¯¥å°±æ˜¯ docker äº†å§ï¼Œç„¶è€Œå› ä¸ºå‡ æ¬¡è´Ÿé¢æ¶ˆæ¯[2][3]è®©æˆ‘å¯¹å…¶æ²¡æœ‰ä»»ä½•å¥½æ„Ÿã€‚ æˆ‘ä¹Ÿå°è¯•åœ¨ wsl2 ä¸Šéƒ¨ç½²äº†ä¸€ä¸‹ dockerï¼Œç„¶è€Œç”±äºæ²¡æœ‰ syst...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"å®¹å™¨\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-11-12T00:00:00.000Z\\",\\"dateModified\\":\\"2025-06-07T12:40:23.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://absx.pages.dev/coding/container.html"}],["meta",{"property":"og:site_name","content":"ç»å¯¹å€¼_x çš„åšå®¢"}],["meta",{"property":"og:title","content":"å®¹å™¨"}],["meta",{"property":"og:description","content":"å®¹å™¨ å…¶å®æˆ‘ä¸€ç›´ä¸å–œæ¬¢å®¹å™¨ï¼Œæˆ‘è®¤ä¸ºå¤„ç†å¤æ‚ä¾èµ–æ˜¯åŒ…ç®¡ç†å™¨çš„èŒè´£ï¼Œæ¨ç»™ container æ˜¯æ¯”è¾ƒç²—æš´æµªè´¹çš„åšæ³•ã€‚ ç„¶è€Œçœ‹åˆ°è™šæ‹Ÿæœºä»¥åï¼Œæˆ‘æ„Ÿè§‰å®¹å™¨è¿˜æ˜¯æœ‰å®ƒçš„ä»·å€¼çš„[1]ã€‚ğŸ˜¦ é€‰æ‹© æœ€æµè¡Œçš„å®¹å™¨å·¥å…·åº”è¯¥å°±æ˜¯ docker äº†å§ï¼Œç„¶è€Œå› ä¸ºå‡ æ¬¡è´Ÿé¢æ¶ˆæ¯[2][3]è®©æˆ‘å¯¹å…¶æ²¡æœ‰ä»»ä½•å¥½æ„Ÿã€‚ æˆ‘ä¹Ÿå°è¯•åœ¨ wsl2 ä¸Šéƒ¨ç½²äº†ä¸€ä¸‹ dockerï¼Œç„¶è€Œç”±äºæ²¡æœ‰ syst..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-06-07T12:40:23.000Z"}],["meta",{"property":"article:tag","content":"å·¥å…·"}],["meta",{"property":"article:published_time","content":"2023-11-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-06-07T12:40:23.000Z"}]]},"git":{"createdTime":1699771501000,"updatedTime":1749300023000,"contributors":[{"name":"lxl66566","username":"lxl66566","email":"18259734087@163.com","commits":14,"url":"https://github.com/lxl66566"}]},"readingTime":{"minutes":8.92,"words":2677},"filePathRelative":"coding/container.md","localizedDate":"2023å¹´11æœˆ12æ—¥","excerpt":"\\n","autoDesc":true}');export{m as comp,u as data};
