import{_ as d,r as o,o as c,c as k,a as e,b as i,d as s,w as t,e as h}from"./app-CT0Hq2fg.js";const g={},m=e("h1",{id:"bot",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#bot"},[e("span",null,"bot")])],-1),u=e("p",null,[i("我曾使用 "),e("a",{href:"https://nonebot.dev/",target:"_blank",rel:"noopener noreferrer"},"nonebot2"),i(" + cqhttp 的方式搭建 bot。这种方案使用 python 语言，并且需要自己写比较底层的代码。在此感谢 "),e("a",{href:"https://github.com/yaowan233",target:"_blank",rel:"noopener noreferrer"},"yaowan233"),i(" 学长的指导。")],-1),b=e("a",{href:"https://koishi.chat/zh-CN/",target:"_blank",rel:"noopener noreferrer"},"koishi",-1),_=e("a",{href:"https://forum.koishi.xyz/",target:"_blank",rel:"noopener noreferrer"},"论坛",-1),y=e("p",null,"comp: 这两个平台都通过 Adapter 适配不同的平台，比较泛用；都有数据库的抽象层，比较易用；2023 开源之夏 nonebot2 也新增了图形界面。我感觉还是看写 python 还是写 ts 舒服来选平台比较合适。",-1),f=e("p",null,[i("我建的 bot 有两个实例：一个是之前一直在用的 QQ bot "),e("code",null,"atri"),i("（2433269451），另一个是后来使用 koishi 的 Telegram bot "),e("a",{href:"https://t.me/atri_absx_bot",target:"_blank",rel:"noopener noreferrer"},[e("code",null,"atri bot")]),i("。")],-1),F={class:"hint-container details"},v=e("summary",null,"查看 atri(QQ) 的信息",-1),C=e("p",null,"她的功能：",-1),x=e("ul",null,[e("li",null,"背单词（英日双语）"),e("li",null,"随机数"),e("li",null,"带饭记账"),e("li",null,"偷窥我")],-1),A=e("p",null,[i("请加为好友（联系绝对值_x 同意好友）后发送"),e("code",null,"help"),i("获取详细指令。你也可以在"),e("a",{href:"https://github.com/lxl66566/primary-atri-bot-plugins",target:"_blank",rel:"noopener noreferrer"},"这里"),i("得到她的实现上述功能的 python 源码。关于环境：")],-1),E=e("code",null,"atri",-1),T=e("code",null,"conda create -n atri python=3.9",-1),N=e("blockquote",null,[e("p",null,"nonebot2 需要在 python>=3.8 环境下运行")],-1),w=h(`<li>使用 pip 安装依赖：<div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#24292e;--shiki-dark:#abb2bf;--shiki-light-bg:#fff;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes github-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nb-cli</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;"> nonebot-adapter-onebot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li>`,1),z=h('<h2 id="koishi" tabindex="-1"><a class="header-anchor" href="#koishi"><span>koishi</span></a></h2><h3 id="install" tabindex="-1"><a class="header-anchor" href="#install"><span>install</span></a></h3><p>这里推荐<a href="https://koishi.chat/zh-CN/manual/starter/boilerplate.html" target="_blank" rel="noopener noreferrer">使用 pnpm/npm 安装</a>，而不是官方推荐的下载安装包。使用 pnpm/npm 安装对 bot 功能没有影响，而且方便开发。</p>',3),Q=e("div",{class:"language-sh line-numbers-mode","data-highlighter":"shiki","data-ext":"sh","data-title":"sh",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[e("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"pnpm"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," i"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}}," -g"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," create-koishi@latest")]),i(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"pnpm"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," create"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," koishi"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"  # 选择是否 install and start 的时候选择 否")]),i(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"pnpm"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," i"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}}," --shamefully-hoist"),e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#7F848E","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"   # 需要添加此后缀")]),i(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"pnpm"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," dev")])])]),e("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),Z=e("div",{class:"language-sh line-numbers-mode","data-highlighter":"shiki","data-ext":"sh","data-title":"sh",style:{"--shiki-light":"#24292e","--shiki-dark":"#abb2bf","--shiki-light-bg":"#fff","--shiki-dark-bg":"#282c34"}},[e("pre",{class:"shiki shiki-themes github-light one-dark-pro vp-code"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"npm"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," i"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#D19A66"}}," -g"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," create-koishi@latest")]),i(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#61AFEF"}},"npm"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," init"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#98C379"}}," koishi")])])]),e("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),j=h('<h3 id="使用" tabindex="-1"><a class="header-anchor" href="#使用"><span>使用</span></a></h3><ul><li><p>telegram：本机没有公网 ip，因此选择 <em>polling</em> 工作模式。代理用 http 好像不能用（这也是我第一次退坑 koishi 的理由），之后尝试用 socks 端口就可以了。</p></li><li><p>QQ：<s>参考<a href="https://forum.koishi.xyz/t/topic/2502" target="_blank" rel="noopener noreferrer">论坛</a>。回复挺破碎的，需要多翻一翻。我能够成功使用，不过会报 warning:</s></p><blockquote><p>由用户 &#39;*&#39; 发送的 session &#39;*&#39; 缺失 username。插件处理可能出现问题。若要针对此问题进行反馈，请前往 <a href="https://k.ilharp.cc/2510" target="_blank" rel="noopener noreferrer">https://k.ilharp.cc/2510</a> 。错误码：2130</p></blockquote><p><s>不影响使用，开发者也<a href="https://forum.koishi.xyz/t/topic/2510/154" target="_blank" rel="noopener noreferrer">说不用在意</a>，那就不管了。</s> chronocat 开发的 QQNT 适配器现已被下架。</p></li></ul><h3 id="开发" tabindex="-1"><a class="header-anchor" href="#开发"><span>开发</span></a></h3><p>我写了一个小玩具（<a href="https://github.com/lxl66566/koishi-plugin-peek" target="_blank" rel="noopener noreferrer">koishi-plugin-peek</a>），大致涵盖了基本的开发指令。推荐在 github 上搜索其他源码广泛学习。</p><ul><li>关于发布插件：<strong><code>pub</code> 之前请一定记得 <code>build</code>！！切记！！</strong></li></ul>',5);function q(B,D){const n=o("RouteLink"),r=o("ZoomedImg"),p=o("CodeTabs");return c(),k("div",null,[m,u,e("p",null,[i("而现在我选择 "),b,i(" 框架。该框架基于 "),s(n,{to:"/coding/nodejs.html"},{default:t(()=>[i("node.js")]),_:1}),i("，具有图形化的操作界面和高度预设，可以接入多个平台，也有成熟的 npm 包管理。文档虽说不算优秀，但至少比曾经的 nonebot2 强数倍。同时也有"),_,i("以供交流。但是代价就是 node.js 的高运行时内存占用了。（常态 600M）")]),y,f,e("details",F,[v,s(r,{alt:"atri",src:"/images/farraginous/atri/atri.jpg",scale:"40%"}),C,x,A,e("ol",null,[e("li",null,[s(n,{to:"/coding/python.html#%E5%88%9B%E5%BB%BA%E7%8E%AF%E5%A2%83"},{default:t(()=>[i("使用 conda")]),_:1}),i("创建出所需环境（此处环境名为"),E,i("）："),T,N]),w,e("li",null,[i("参考"),s(n,{to:"/essay/2022.html#_20220506"},{default:t(()=>[i("随笔中的启动脚本")]),_:1})])])]),z,s(p,{id:"79",data:[{id:"pnpm"},{id:"npm"}]},{title0:t(({value:a,isActive:l})=>[i("pnpm")]),title1:t(({value:a,isActive:l})=>[i("npm")]),tab0:t(({value:a,isActive:l})=>[Q]),tab1:t(({value:a,isActive:l})=>[Z]),_:1}),e("blockquote",null,[e("p",null,[e("em",null,[i("关于 pnpm 安装后缀，详见 "),s(n,{to:"/coding/nodejs.html#%E7%A5%9E%E7%A7%98%E6%8A%A5%E9%94%99"},{default:t(()=>[i("nodejs")]),_:1})])])]),j])}const R=d(g,[["render",q],["__file","bot.html.vue"]]),I=JSON.parse('{"path":"/coding/bot.html","title":"bot","lang":"zh-CN","frontmatter":{"icon":"brands fa-bots","date":"2023-07-24T00:00:00.000Z","category":["编程","教程"],"tag":["成果"],"description":"bot 我曾使用 nonebot2 + cqhttp 的方式搭建 bot。这种方案使用 python 语言，并且需要自己写比较底层的代码。在此感谢 yaowan233 学长的指导。 而现在我选择 koishi 框架。该框架基于 ，具有图形化的操作界面和高度预设，可以接入多个平台，也有成熟的 npm 包管理。文档虽说不算优秀，但至少比曾经的 nonebo...","head":[["meta",{"property":"og:url","content":"https://absx.pages.dev/coding/bot.html"}],["meta",{"property":"og:site_name","content":"绝对值_x的博客"}],["meta",{"property":"og:title","content":"bot"}],["meta",{"property":"og:description","content":"bot 我曾使用 nonebot2 + cqhttp 的方式搭建 bot。这种方案使用 python 语言，并且需要自己写比较底层的代码。在此感谢 yaowan233 学长的指导。 而现在我选择 koishi 框架。该框架基于 ，具有图形化的操作界面和高度预设，可以接入多个平台，也有成熟的 npm 包管理。文档虽说不算优秀，但至少比曾经的 nonebo..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-10T08:35:24.000Z"}],["meta",{"property":"article:tag","content":"成果"}],["meta",{"property":"article:published_time","content":"2023-07-24T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-10T08:35:24.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"bot\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-07-24T00:00:00.000Z\\",\\"dateModified\\":\\"2024-06-10T08:35:24.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"koishi","slug":"koishi","link":"#koishi","children":[{"level":3,"title":"install","slug":"install","link":"#install","children":[]},{"level":3,"title":"使用","slug":"使用","link":"#使用","children":[]},{"level":3,"title":"开发","slug":"开发","link":"#开发","children":[]}]}],"git":{"createdTime":1690216707000,"updatedTime":1718008524000,"contributors":[{"name":"lxl66566","email":"18259734087@163.com","commits":7},{"name":"lxl66566","email":"lxl66566@gmail.com","commits":3}]},"readingTime":{"minutes":2.57,"words":772},"filePathRelative":"coding/bot.md","localizedDate":"2023年7月24日","excerpt":"\\n","autoDesc":true}');export{R as comp,I as data};
